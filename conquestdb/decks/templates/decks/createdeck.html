{% extends "base.html" %}
{% block title %}Create Deck{% endblock %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'createdeck.css' %}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<datalist id="card_list">
    {% for card_name in auto_complete %}
        <option value="{{ card_name }}"></option>
    {% endfor %}
</datalist>
<div id="deck-container">
    <input id="toggle-position-type-deck" type="button" value="Lock Deck" onclick="makeDeckSticky(this);">
    <div class="auto-deck-build">
        <div id="warlord-card" class="poster-card"><img id="Nazdreg" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image"></div>
        <div id="synapse-card" class="poster-card"><img id="Cardback" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image"></div>
        <div id="pledge-card" class="poster-card"><img id="Cardback_Two" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image"></div>
        <div id="details">Details<br>
            <label for="name-deck">Name:</label>
            <input id="name-deck" type="search" size="28"><div class="tooltip">?
                <span id="name-tooltip" class="tooltiptext">Maximum of 29 characters are allowed. <br>Only letters, numbers and spaces are allowed.</span>
            </div><br>
            <div class="ally-area">
                <label for="ally">Ally:</label>
                <select name="ally" id="ally" onChange="notCheckedAlly();">
                    <option value=""></option>
                    <option value="Space Marines">Space Marines</option>
                    <option value="Tau">Tau</option>
                    <option value="Eldar">Eldar</option>
                    <option value="Dark Eldar">Dark Eldar</option>
                    <option value="Chaos">Chaos</option>
                    <option value="Orks">Orks</option>
                    <option value="Astra Militarum">Astra Militarum</option>
                </select>
                <p id="ok-ally">Ally OK</p>
            </div>
            <div class="card-count-div"><div>Card Count: </div><div id="card-count">0</div><div class="tooltip">?
                <span id="card-count-tooltip" class="tooltiptext">You need to have 50 cards in your deck for it to be legal. Warlords, synapses and pledges do not count toward this amount.</span>
            </div></div>
        </div>
        <div id="signature-squad-cards" class="db-section">Signature Squad

        </div>
        <div id="army-cards" class="db-section">Army Units</div>
        <div id="event-cards" class="db-section">Events</div>
        <div id="attachment-cards" class="db-section">Attachments</div>
        <div id="support-cards" class="db-section">Supports</div>
    </div>
    <div id="manual-deck-import">
    <textarea id="chat-log" cols="100" rows="10"></textarea><br>
    </div>
    <input id="card-input" type="search" list="card_list" size="60" style="max-width:35vw;"><br>
    <input id="card-submit" type="button" value="Add Card">
    <input id="deck-submit-1" type="button" value="Save Deck" onclick="sendDeckAuto();">
    <input id="username" name="username" value="{{ user.username }}" style="display:none;">
    <div id="responseMessage">
        <p></p>
    </div>
</div>
<div id="description-container">
    <h2>Add a description for your deck here</h2>
    <textarea id="descriptionInput" name="description" rows="20" cols="80" style="max-width:40vw;">{{ desc }}</textarea><br>
</div>
<div id="mini-card-search-container-container">
    <div id="mini-card-search-container">
        <div><h2>Card Filter</h2><div class="tooltip">NOTES
                    <span class="tooltiptext">After you select a warlord, only cards you can add to your deck will be shown.<br>
                    This does take your ally into consideration.<br>Clicking on a card in the filter adds it to your deck.</span>
                </div></div>
        <button id="clear-filter" onclick="clearFilters();">Reset Filters</button>
        <form id="myForm">
            <div id="filters-container">
                <p id="p-card-name" class="filter">Card Name:</p><input id="searchInput" class="filter" type="text" name="search">
                <p id="p-keyword" class="filter">Keyword or Specialization:</p><select name="keyword" class="filter" id="keywordInput">
                    <option value="None"></option>
                    <option value="No Attachments">No Attachments</option>
                    <option value="No Wargear Attachments">No Wargear Attachments</option>
                    <option value="Armorbane">Armorbane</option>
                    <option value="Brutal">Brutal</option>
                    <option value="Limited">Limited</option>
                    <option value="Flying">Flying</option>
                    <option value="Area Effect">Area Effect</option>
                    <option value="Ranged">Ranged</option>
                    <option value="Ambush">Ambush</option>
                    <option value="Deep Strike">Deep Strike</option>
                    <option value="Lumbering">Lumbering</option>
                    <option value="Sweep">Sweep</option>
                    <option value="Retaliate">Retaliate</option>
                    <option value="Hive Mind">Hive Mind</option>
                    <option value="Unstoppable">Unstoppable</option>
                    <option value="Goes Fasta">Goes Fasta!</option>
                    <option value="Bloodthirst">Bloodthirst</option>
                </select>
                <p id="p-min-cost" class="filter">Min Cost:</p><input id="minCostInput" class="filter" type="text" name="cost-min">
                <p id="p-max-cost" class="filter">Max Cost:</p><input id="maxCostInput" class="filter" type="text" name="cost-max">
                <p id="p-shield" class="filter">Shields:</p><select name="shield" class="filter" id="shieldInput">
                    <option value="-1"></option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                </select>
                <p id="p-traits" class="filter">Trait:</p><input id="traitsInput" class="filter" type="text" name="traits">
                <p id="p-order" class="filter">Order By:</p><select name="order" class="filter" id="order">
                    <option value="None"></option>
                    <option value="Name">Name</option>
                    <option value="Card Type">Card Type</option>
                    <option value="COST">COST</option>
                    <option value="Attack">ATK</option>
                    <option value="Health">HP</option>
                    <option value="Command">Command</option>
                    <option value="Shields">Shields</option>
                </select>
                <p id="p-asc-desc" class="filter">Asc./Desc.:</p><select name="asc-desc" class="filter" id="asc-desc">
                    <option value="Ascending" selected="selected">Ascending</option>
                    <option value="Descending">Descending</option>
                </select>
            </div>
            <button id="send-filter">Perform Search</button>
        </form>
        <div id="new-card-type-filter">
            <div id="type_code" class="btn-group btn-group-justified" data-toggle="buttons">
                <label id="Warlord_Button" title="Warlord" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Warlord">
                <input type="checkbox" name="options"><svg version="1.1" id="_x32_" width="50" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" xml:space="preserve" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <style type="text/css">  .st0{fill:#000000;}  </style> <g> <path class="st0" d="M437.914,74.078C392.43,27,326.117,0,255.992,0C185.883,0,119.57,27,74.102,74.063 c-42.5,44-64.703,102.828-62.531,165.688l6.609,83.875c6.031,84.75,55.234,93.906,76.094,93.906c7.563,0,15.531-1.094,23.625-3.188 c1.094,7.938,1,21.859,0.922,32.688l-0.078,15.063c-0.141,10.938-0.359,27.5,11.234,39.234c4.797,4.875,13.563,10.672,28,10.672 h196.047c14.438,0,23.188-5.797,28-10.656c11.578-11.75,11.375-28.297,11.234-39.25l-0.094-15.031 c-0.063-10.844-0.172-24.781,0.938-32.719c8.172,2.109,16.094,3.188,23.625,3.188c20.859,0,70.047-9.156,76.094-93.75l6.563-83.156 l0.047-0.875C502.602,176.891,480.398,118.063,437.914,74.078z M459.961,237.906l-6.516,82.844 c-2.672,37.344-14.703,56.281-35.719,56.281c-4.844,0-10.266-0.891-16.297-2.688c-14.406-4.156-26.891-1.375-35.703,7.5 c-13.406,13.5-13.266,35.313-13.047,65.5l0.078,15.281c0.031,2.5,0.078,6.188-0.141,8.875h-42.75v-50.016h-32.406V471.5h-42.938 v-50.016h-32.391V471.5h-42.766c-0.203-2.688-0.156-6.375-0.125-8.906l0.078-15.297c0.219-30.156,0.359-51.953-13.047-65.453 c-8.766-8.844-20.953-11.75-35.875-7.453c-5.859,1.75-11.281,2.641-16.125,2.641c-21.031,0-33.031-18.938-35.719-56.438 l-6.531-82.688c-1.656-51.609,16.5-99.781,51.203-135.688C141.117,63,196.805,40.5,255.992,40.5 c59.203,0,114.891,22.5,152.781,61.719C443.477,138.125,461.648,186.297,459.961,237.906z"></path> <path class="st0" d="M256.008,309.656c-9.719,0-31.125,46.688-35.031,54.469c-3.875,7.781,3.906,19.469,15.578,15.563 c11.672-3.875,19.453-13.609,19.453-13.609s7.781,9.734,19.453,13.609c11.656,3.906,19.453-7.781,15.563-15.563 C287.117,356.344,265.742,309.656,256.008,309.656z"></path> <path class="st0" d="M171.586,183.281c-30.891-3.25-58.578,19.188-61.828,50.094l-4.188,29.422 c-3.25,30.922,19.188,58.578,50.078,61.828c30.922,3.25,58.609-19.172,61.844-50.094l4.188-29.422 C224.914,214.188,202.508,186.531,171.586,183.281z"></path> <path class="st0" d="M402.242,233.375c-3.234-30.906-30.938-53.344-61.828-50.094c-30.922,3.25-53.328,30.906-50.094,61.828 l4.172,29.422c3.25,30.922,30.938,53.344,61.844,50.094s53.344-30.906,50.094-61.828L402.242,233.375z"></path> </g> </g></svg>
                </label>
                <label id="Army_Button" title="Army" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Army">
                <input type="checkbox" name="options"><svg fill="#000000" width="50" height="30" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M16 15.503A5.041 5.041 0 1 0 16 5.42a5.041 5.041 0 0 0 0 10.083zm0 2.215c-6.703 0-11 3.699-11 5.5v3.363h22v-3.363c0-2.178-4.068-5.5-11-5.5z"></path></g></svg>
                </label>
                <label id="Support_Button" title="Support" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Support">
                <input type="checkbox" name="options"><svg fill="#000000" width="50" height="30" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M28.282 30.628l-1.791-5.793h-2.456v-11.772l3.816-4.731v-6.934h-4.020v3.27h-2.447v-3.27h-4.064v3.27h-2.403v-3.27h-4.064v3.27h-2.403v-3.27h-4.020v6.934l3.816 4.731v11.772h-2.456l-1.791 5.793z"></path> </g></svg>
                </label>
                <label id="Event_Button" title="Event" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Event">
                <input type="checkbox" name="options"><svg fill="#000000" width="50" height="30" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="lightning" class="icon glyph"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M18,11.74a1,1,0,0,0-.52-.63L14.09,9.43,15,3.14a1,1,0,0,0-1.78-.75l-7,9a1,1,0,0,0-.17.87,1,1,0,0,0,.59.67l4.27,1.71L10,20.86a1,1,0,0,0,.63,1.07A.92.92,0,0,0,11,22a1,1,0,0,0,.83-.45l6-9A1,1,0,0,0,18,11.74Z"></path></g></svg>
                </label>
                <label id="Attachment_Button" title="Attachment" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Attachment">
                <input type="checkbox" name="options"><svg fill="#000000" width="50" height="30" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 442.246 442.246" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M409.657,32.474c-43.146-43.146-113.832-43.146-156.978,0l-84.763,84.762c29.07-8.262,60.589-6.12,88.129,6.732 l44.063-44.064c17.136-17.136,44.982-17.136,62.118,0c17.136,17.136,17.136,44.982,0,62.118l-55.386,55.386l-36.414,36.414 c-17.136,17.136-44.982,17.136-62.119,0l-47.43,47.43c11.016,11.017,23.868,19.278,37.332,24.48 c36.415,14.382,78.643,8.874,110.467-16.219c3.06-2.447,6.426-5.201,9.18-8.262l57.222-57.222l34.578-34.578 C453.109,146.306,453.109,75.926,409.657,32.474z"></path> <path d="M184.135,320.114l-42.228,42.228c-17.136,17.137-44.982,17.137-62.118,0c-17.136-17.136-17.136-44.981,0-62.118 l91.8-91.799c17.136-17.136,44.982-17.136,62.119,0l47.43-47.43c-11.016-11.016-23.868-19.278-37.332-24.48 c-38.25-15.3-83.232-8.262-115.362,20.502c-1.53,1.224-3.06,2.754-4.284,3.978l-91.8,91.799 c-43.146,43.146-43.146,113.832,0,156.979c43.146,43.146,113.832,43.146,156.978,0l82.927-83.845 C230.035,335.719,220.243,334.496,184.135,320.114z"></path> </g> </g> </g></svg>
                </label>
                <label id="Synapse_Button" title="Synapse" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Synapse">
                <input type="checkbox" name="options"><svg fill="#000000" width="50" height="30" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M29.762 14.465c-1.574 0.093-3.462-0.482-4.961-1.663-0.926-0.73-1.559-1.575-1.875-2.407 1.51-1.223 2.431-2.849 2.431-4.632 0-0.298-0.357-0.571-0.972-0.813-0.085 0.336-0.273 0.682-0.555 0.989 0 0-0-0-0-0-0.043 0.046-0.087 0.092-0.134 0.136-0.791 0.749-1.885 0.916-2.445 0.372-0-0-0-0-0-0-0.024-0.024-0.046-0.048-0.068-0.074-0.004-0.005-0.008-0.010-0.012-0.014-0.020-0.025-0.039-0.050-0.056-0.077-0.003-0.005-0.007-0.010-0.010-0.016-0.017-0.027-0.034-0.054-0.048-0.083-0-0.001-0.001-0.002-0.001-0.003-0.015-0.029-0.028-0.059-0.040-0.089-0.002-0.006-0.005-0.012-0.007-0.018-0.011-0.030-0.021-0.060-0.030-0.091-0.002-0.006-0.003-0.011-0.005-0.017-0.008-0.031-0.016-0.063-0.022-0.095-0-0.002-0.001-0.003-0.001-0.005-0.006-0.033-0.010-0.067-0.014-0.101-0.001-0.006-0.001-0.013-0.002-0.019-0.003-0.033-0.005-0.067-0.005-0.102-0-0.006 0-0.011 0-0.017 0-0.034 0.001-0.069 0.004-0.103 0-0.002 0-0.004 0-0.006 0.003-0.036 0.007-0.072 0.012-0.108 0.001-0.007 0.002-0.013 0.003-0.020 0.006-0.036 0.012-0.072 0.020-0.108 0.001-0.005 0.003-0.011 0.004-0.016 0.008-0.035 0.017-0.071 0.028-0.107 0.001-0.003 0.002-0.006 0.002-0.008 0.011-0.037 0.024-0.074 0.037-0.111 0.003-0.007 0.005-0.014 0.008-0.021 0.014-0.036 0.028-0.072 0.044-0.109 0.003-0.006 0.005-0.011 0.008-0.017 0.016-0.034 0.032-0.069 0.050-0.103 0.002-0.004 0.004-0.009 0.007-0.013 0.019-0.036 0.039-0.071 0.060-0.107 0.082-0.138 0.18-0.274 0.296-0.403-0.921-0.141-1.952-0.253-3.030-0.331-0.81-0.132-1.643-0.202-2.494-0.202h-0c-0.508 0-1.009 0.025-1.502 0.073-1.495 0.012-2.936 0.096-4.165 0.262 0.012 0.011 0.025 0.022 0.037 0.034 0.177 0.167 0.323 0.349 0.438 0.537 0 0 0 0-0 0 0.024 0.039 0.047 0.079 0.068 0.119 0.001 0.002 0.003 0.005 0.004 0.007 0.021 0.040 0.041 0.080 0.059 0.12 0.001 0.001 0.001 0.003 0.002 0.004 0.018 0.040 0.035 0.081 0.051 0.121 0 0 0 0.001 0.001 0.001 0.015 0.040 0.029 0.081 0.041 0.121 0.001 0.003 0.002 0.006 0.003 0.009 0.024 0.079 0.042 0.159 0.055 0.237 0.001 0.004 0.001 0.009 0.002 0.013 0.012 0.077 0.018 0.153 0.018 0.227 0 0.005 0 0.010 0 0.015-0 0.037-0.002 0.074-0.005 0.11-0 0.001-0 0.002-0 0.003-0.003 0.035-0.008 0.069-0.013 0.103-0.001 0.005-0.002 0.010-0.002 0.014-0.006 0.034-0.014 0.068-0.023 0.101-0.001 0.004-0.002 0.008-0.003 0.012-0.009 0.031-0.019 0.061-0.030 0.090-0.001 0.004-0.003 0.008-0.004 0.011-0.012 0.031-0.026 0.061-0.041 0.091-0.002 0.005-0.005 0.010-0.008 0.015-0.015 0.028-0.030 0.056-0.048 0.082-0.001 0.002-0.002 0.004-0.003 0.005-0.018 0.028-0.038 0.055-0.059 0.081-0.004 0.005-0.008 0.010-0.012 0.015-0.022 0.026-0.045 0.051-0.069 0.075-0.559 0.544-1.654 0.377-2.445-0.372-0.054-0.051-0.105-0.104-0.153-0.157-0 0-0 0-0 0-0.329-0.365-0.526-0.783-0.575-1.173-0.59 0.273-0.932 0.61-0.932 1.018 0 1.767 0.905 3.379 2.39 4.598-0.312 0.843-0.949 1.701-1.888 2.44-1.498 1.181-3.387 1.757-4.961 1.663-0.148 0.761-0.211 1.528-0.211 2.329 0 5.776 3.985 10.7 9.552 12.433-1.688-1.313-1.654-4.415-0.422-5.96-5.446-4.351-3.125-9.043 2.213-10.903 0.074 0.016 0.149 0.032 0.224 0.047-0.701 0.739-1.135 1.765-1.135 2.902 0 1.92 1.24 3.528 2.909 3.958-0.541-0.579-0.905-1.666-0.905-2.914 0-1.854 0.804-3.357 1.796-3.357s1.796 1.503 1.796 3.357c0 1.248-0.365 2.336-0.905 2.915 1.669-0.429 2.911-2.038 2.911-3.958 0-1.177-0.467-2.237-1.212-2.98 0.084-0.019 0.167-0.040 0.249-0.061 5.249 1.704 6.64 6.88 1.771 10.995 1.567 1.532 0.912 4.607-0.422 5.96 5.567-1.733 9.605-6.657 9.605-12.433 0-0.801-0.116-1.567-0.264-2.328zM10.512 8.029c0.62-0.54 1.896-0.554 2.852-0.032s1.228 1.383 0.609 1.923c-0.62 0.54-1.896 0.554-2.852 0.032s-1.228-1.383-0.609-1.923zM18.664 7.996c0.956-0.522 2.233-0.508 2.852 0.032s0.347 1.401-0.609 1.923-2.233 0.508-2.852-0.032c-0.62-0.54-0.347-1.401 0.609-1.923z"></path> </g></svg>
                </label>
            </div>
        </div>
        <div id="new-faction-filter">
            <div id="faction_code" class="btn-group btn-group-justified" data-toggle="buttons">
                <label id="Space_Marines_Button" title="Space Marines" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Space Marines">
                <input type="checkbox" name="options" id="option1"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -10px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(0, 0, 255);" d="M499.709 823.657c-14.643-29.713-18.33-54.911-18.33-125.621v-61.269h63.035l-0.057 57.779c-0.060 64.825-3.529 87.927-17.769 118.37-15.79 33.737-15.585 33.655-26.891 10.751zM373.025 658.918c-2.238-2.7-4.73-15.443-5.624-28.718l-1.588-23.864-21.722 19.584c-21.812 19.667-33.818 28.083-33.81 23.7 0.007-1.289 4.73-10.188 10.505-19.763 19.459-32.265 11.597-38.448-16.288-12.811-16.752 15.401-35.354 27.619-38.006 24.966-0.665-0.665 4.299-8.532 11.029-17.477 11.571-15.411 20.746-30.5 20.746-34.146 0-4.259-10.275-0.288-44.069 17.035-20.112 10.301-37.669 17.645-39.008 16.308s3.624-7.943 11.049-14.678c33.289-30.204 50.789-48.27 49.217-50.815-0.936-1.518-8.007 0.826-15.708 5.202-42.831 24.347-53.816 29.621-69.171 33.235-9.283 2.19-21.607 3.966-27.388 3.951-9.448-0.018-7.781-1.319 16.639-12.989 14.93-7.138 32.835-18.376 39.772-24.989 13.122-12.472 16.811-21.238 7.38-17.51-16.422 6.481-73.288 19.53-84.802 19.472-12.792-0.069-13.188-0.322-7.508-4.73 3.296-2.558 18.166-10.769 33.021-18.248 27.111-13.634 37.522-20.681 37.522-25.405 0-4.538-9.091-2.702-31.997 6.467-17.608 7.054-27.118 9.002-43.819 9.002-26.226 0-75.53-6.081-72.203-8.905 1.335-1.131 13.246-3.787 26.445-5.904 28.044-4.484 71.951-18.513 92.357-29.517 32.467-17.507 23.577-22.815-17.961-10.745-34.023 9.891-66.013 11.079-110.418 4.115l-27.018-4.238 34.516-3.91c51.184-5.795 92.152-16.21 97.433-24.765 0.712-1.144-16.532-1.985-38.324-1.887-31.446 0.152-41.449-0.826-48.562-4.756l-8.949-4.948 13.455-3.53c7.392-1.944 19.527-5.298 26.962-7.452l13.504-3.922-12.009-2.026c-34.924-5.897-56.228-12.156-76.34-22.43l-22.303-11.397 37.574 1.452c41.028 1.575 129.348-3.255 180.554-9.887 86.376-11.183 117.897-9.020 133.895 9.195 9.399 10.71 11.097 15.872 19.345 58.867 2.739 14.293 9.233 35.908 14.417 48.033 7.735 18.077 9.686 27.243 10.874 50.95 1.311 26.322 0.563 31.8-8.307 61.056-7.087 23.373-9.342 35.759-8.252 45.377 1.575 13.986-0.434 16.363-7.065 8.375zM651.876 644.268c-14.479-42.626-21.648-93.299-17.633-124.748 1.378-10.83 6.799-29.449 12.037-41.397 5.795-13.22 10.487-30.173 11.98-43.363 2.903-25.6 8.341-39.636 19.727-50.92 15.166-15.012 24.765-15.933 92.328-8.798 109.455 11.555 140.531 13.425 194.354 11.727 28.897-0.92 55.238-2.518 58.533-3.577s-4.145 3.419-16.543 9.932c-14.971 7.859-33.126 14.151-54.032 18.728-17.312 3.787-32.567 7.787-33.9 8.884-4.342 3.607 33.167 9.667 51.593 8.334 9.901-0.715 17.326-0.198 16.486 1.15-4.525 7.331-22.769 12.044-57.619 14.889-37.525 3.060-45.060 5.072-41.374 11.038 2.674 4.32 36.942 11.547 74.68 15.749 17.797 1.985 31.963 3.992 31.484 4.462s-13.681 3.114-29.353 5.866c-31.893 5.59-53.055 4.555-85.649-4.23-26.849-7.228-43.396-9.65-43.396-6.362 0 10.096 75.984 44.61 99.818 45.339 5.356 0.165 13.125 1.307 17.249 2.542 6.651 1.985 5.467 2.845-10.307 7.58-27.715 8.3-68.502 5.362-97.444-7.024-12.217-5.221-22.689-9.028-23.285-8.431-1.22 1.22 22.48 21.358 37.505 31.852 5.508 3.854 15.579 8.644 22.356 10.645 16.606 4.893 18.050 10.578 2.709 10.578-10.571 0-71.547-13.946-85.371-19.532-9.603-3.869-5.669 5.16 7.911 18.166 7.235 6.942 21.080 16.216 30.77 20.624 39.062 17.777 38.051 16.752 14.602 14.836-22.446-1.834-41.81-9.136-70.523-26.574-17.467-10.607-27.029-13.202-27.029-7.31 0 5.818 29.711 32.262 51.020 45.407 11.53 7.111 20.987 13.946 20.992 15.186 0.088 7.541-29.44-3.896-62.757-24.304-38.898-23.823-45.335-20.512-23.301 11.939 18.002 26.522 18.043 26.61 12.896 26.61-2.477 0-14.574-8.103-26.896-18.002-22.863-18.391-31.402-22.344-27.51-12.759 6.907 17.043 13.328 37.967 12.027 39.267-0.831 0.831-11.038-7.694-22.679-18.944-25.093-24.224-27.644-23.503-29.868 8.334l-1.505 21.619-5.098-15.012zM468.268 613.611c-4.679-1.207-5.344-3.458-3.992-13.534 2.221-16.534 0.51-19.534-15.904-27.848-17.879-9.062-28.905-21.981-31.411-36.809-2.319-13.748 0.679-22.512 14.766-42.981 5.831-8.468 9.891-16.541 9.031-17.939s-6.163 0.181-11.787 3.497l-10.219 6.034-3.729-6.935c-2.052-3.814-4.32-17.142-5.057-29.627-1.575-26.866 4.251-41.534 22.463-56.545 18.453-15.216 36.481-19.825 77.487-19.825 40.317 0 63.719 5.308 83.768 19.013 20.255 13.847 24.296 21.812 24.296 47.994 0 21.443-5.21 42.553-10.505 42.553-1.248 0-3.951-2.026-5.999-4.502-5.057-6.095-15.012-5.773-15.012 0.486 0 2.745 4.114 11.396 9.13 19.224 17.673 27.536 17.556 49.749-0.305 63.424-29.119 22.295-29.845 23.21-29.845 38.437 0 10.342-1.33 14.889-4.746 16.199-5.485 2.108-84.041 1.834-92.416-0.311zM531.216 578.52c0.884-2.313-1.207-9.744-4.653-16.51-7.628-14.946-15.977-16.22-22.59-3.442-5.958 11.53-5.788 17.158 0.674 20.917 7.813 4.554 24.683 3.939 26.568-0.961zM479.88 547.071c17.387-7.986 23.916-16.139 19.513-24.378-1.912-3.583-8.054-8.416-13.654-10.751-25.036-10.465-55.919-0.428-57.805 18.765-1.929 19.626 25.819 28.37 51.946 16.363zM593.174 543.565c10.874-13.437 4.889-28.131-13.496-33.081-23.669-6.368-50.258 1.84-50.258 15.53 0 5.65 14.479 18.216 27.1 23.519 11.303 4.743 30.508 1.616 36.647-5.958zM494.895 345.114c-3.296-1.818-9.204-6.614-13.127-10.676-6.744-6.991-8.621-7.327-35.726-6.368-21.11 0.754-28.944 0.019-29.919-2.777-1.985-5.765 15.954-11.857 42.108-14.274 33.982-3.146 36.399-5.819 37.693-41.581 0.961-26.587 0.424-29.886-7.444-45.424-7.925-15.667-8.186-17.278-3.951-24.839 6.409-11.434 17.019-16.159 32.773-14.595 9.766 0.961 15.271 3.501 20.255 9.296 8.662 10.061 8.586 14.109-0.498 29.609-13.639 23.28-13.839 63.555-0.387 79.189 6.333 7.366 9.148 8.069 40.635 10.142 34.395 2.272 43.676 5.438 36.604 12.513-2.626 2.622-12.773 3.501-33.696 2.924-28.165-0.785-30.328-0.413-36.616 6.293-3.674 3.917-9.641 8.686-13.247 10.587-8.228 4.34-27.551 4.32-35.466-0.019z"></path>
                </svg>
                </label>
                <label id="Astra_Militarum_Button" title="Astra Militarum" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Astra Militarum">
                <input type="checkbox" name="options" id="option2"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -10px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(128, 128, 128);" d="M152.322 1004.128c1.425-10.93 8.096-93.096 14.825-182.592 11.935-158.744 12.021-162.955 3.54-172.363-4.782-5.304-40.040-35.181-78.352-66.394s-74.761-60.988-80.997-66.167l-11.338-9.416 198.599-507.196h539.403l96.344 246.648c52.989 135.657 97.52 249.805 98.956 253.662 1.811 4.862-24.338 29.697-85.23 80.947l-87.842 73.933 14.935 157.519c8.215 86.636 16.269 169.618 17.9 184.405l2.964 26.886h-54.004c-52.862 0-54.006-0.222-54.087-10.521-0.047-5.786-4.216-57.863-9.269-115.726s-9.223-110.992-9.269-118.064c-0.082-12.795-0.244-12.858-32.813-12.858-18.002 0-32.685 1.578-32.63 3.507s3.177 56.11 6.937 120.402c3.76 64.292 6.871 120.577 6.913 125.078 0.069 7.343-5.682 8.183-56.032 8.183h-56.11v-121.188c0-66.654-1.277-124.517-2.838-128.584-2.256-5.88-10.404-7.396-39.744-7.396h-36.906v257.169h-102.236l5.507-257.169h-62.248l-0.013 47.927c-0.008 26.36-1.391 84.223-3.074 128.584l-3.060 80.658h-111.32l2.591-19.872zM307.512 504.498c44.099-28.572 62.554-45.157 62.554-56.216 0-5.096-24.323-26.285-64.292-56.011-35.361-26.298-67.724-50.721-71.918-54.273-6.761-5.726-10.883-2.409-36.364 29.266-26.672 33.156-47.188 66.214-47.188 76.038 0 6.531 47.975 51.902 73.094 69.125 12.518 8.584 28.276 15.681 35.019 15.772 7.031 0.095 27.968-10.013 49.096-23.702zM740.314 492.786l59.836-35.579-10.27-14.686c-5.648-8.077-23.556-31.256-39.794-51.508s-31.257-39.918-33.374-43.701c-5.54-9.899-39.65 8.345-98.533 52.702-47.613 35.866-58.36 47.676-53.92 59.247 1.999 5.21 107.096 68.764 114.146 69.026 1.14 0.042 28.999-15.934 61.909-35.502z"></path>
                </svg>
                </label>
                <label id="Orks_Button" title="Orks" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Orks">
                <input type="checkbox" name="options" id="option3"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -2px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(0, 128, 0);" d="M317.449 991.655c-28.878-17.805-112.118-72.856-184.977-122.337l-132.471-89.964 4.985-58.6c2.741-32.23 12.207-103.011 21.035-157.292l16.051-98.692 20.86 87.727c31.191 131.175 41.023 161.434 48.513 149.315 3.499-5.662 14.965-47.286 25.479-92.498s22.25-84.14 26.080-86.507c3.83-2.367 10.261 5.154 14.29 16.714 16.368 46.954 84.225 187.434 91.738 189.919 4.433 1.467 24.172-27.674 43.863-64.756s39.495-68.582 44.008-69.999c5.432-1.705 9.393 17.909 11.718 58.035 1.932 33.336 7.82 69.67 13.084 80.742 9.545 20.076 9.652 19.954 38.388-43.863 15.849-35.197 29.695-64.942 30.769-66.099s13.992 23.25 28.708 54.237c15.87 33.418 29.398 53.607 33.25 49.622 3.572-3.695 18.727-44.551 33.677-90.79s29.455-86.631 32.231-89.761c2.777-3.129 10.378 13.48 16.892 36.91s15.642 52.308 20.285 64.173l8.442 21.575 7.040-18.276c3.872-10.052 15.174-56.109 25.115-102.348s23.452-103.474 30.026-127.188c15.871-57.253 21.779-40.581 27.351 77.184 2.348 49.617 6.040 123.437 8.205 164.045l3.936 73.833-93.625 83.58c-138.094 123.278-239.974 203.578-258.449 203.704-2.195 0.026-27.619-14.54-56.497-32.345zM203.773 510.204l-56.49-118.54-107.407-42.826-4.304-62.658c-2.367-34.462-6.366-75.817-8.888-91.901l-4.584-29.242 243.254-165.037 107.223 8.006c58.973 4.403 110.622 10.559 114.776 13.68s43.024 33.244 86.378 66.941c75.646 58.795 78.626 62.162 73.883 83.46-2.718 12.206-5.292 26.832-5.72 32.501s25.181 32.259 56.908 59.088c31.727 26.829 57.32 51.75 56.873 55.38s-32.662 10.599-71.588 15.488c-38.926 4.889-75.039 10.524-80.25 12.524-16.365 6.28-30.979 43.594-57.992 148.070-14.394 55.672-27.913 106.156-30.042 112.187-2.487 7.046-11.53-4.062-25.294-31.070-11.783-23.12-24.867-42.036-29.075-42.036s-17.932 22.206-30.498 49.346l-22.846 49.346-8.767-68.015c-4.822-37.408-10.862-70.11-13.423-72.67-7.686-7.686-24.716 14.7-31.945 41.993l-6.777 25.587-8.541-32.897c-20.893-80.475-36.121-74.924-56.474 20.588-8.839 41.48-17.383 76.729-18.986 78.332s-28.335-50.429-59.405-115.626zM355.393 395.997c8.793-9.716 22.768-15.298 38.299-15.298 17.63 0 24.454-3.292 24.454-11.798 0-17.424-30.885-69.289-39.542-66.403-8.922 2.974-62.53 99.758-62.692 113.184-0.144 11.923 19.938 1.911 39.482-19.684zM315.581 298.455c23.593-41.138 28.223-79.188 13.555-111.38-8.479-18.608-86.126-62.245-110.76-62.245-9.712 0-50.926 44.208-66.196 71.005-2.778 4.876 2.104 33.492 10.85 63.591 14.613 50.293 18.040 55.614 42.298 65.691 14.518 6.031 40.312 11.135 57.319 11.342 29.762 0.363 31.748-1.063 52.933-38.004zM547.673 275.133c0.876-0.653 3.796-19.934 6.489-42.848 4.292-36.518 3.334-41.661-7.76-41.661-6.961 0-14.321 6.365-16.356 14.145-2.551 9.755-20.723 20.354-58.549 34.15l-54.85 20.005 24.508 12.976c18.683 9.892 34.066 11.959 64.717 8.698 22.114-2.353 40.925-4.812 41.801-5.465z"></path>
                </svg>
                </label>
                <label id="Chaos_Button" title="Chaos" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Chaos">
                <input type="checkbox" name="options" id="option4"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -13px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(255, 0, 0);" d="M477.482 944.997c-21.236-43.475-38.611-80.637-38.609-82.584s7.435-3.539 16.519-3.539h16.517v-101.182c0-69.322-1.657-102.206-5.262-104.434-3.061-1.892-30.116 21.603-64.692 56.178l-59.43 59.43 11.129 11.847c9.497 10.109 10.033 12.267 3.659 14.714-16.23 6.228-165.906 53.491-166.576 52.6-0.393-0.523 12.102-39.74 27.767-87.149l28.481-86.198 10.126 9.513c5.569 5.232 12.146 9.513 14.615 9.513 6.683 0 115.24-110.091 115.24-116.868 0-4.459-26.045-5.828-110.898-5.828h-110.898v32.999l-82.584-41.212c-45.421-22.667-82.584-42.33-82.584-43.697s37.163-21.030 82.584-43.697l82.584-41.212v32.999l41.292 0.018c22.711 0.010 71.494 1.399 108.408 3.088 90.592 4.144 90.665 3.855 17.394-69.607-30.826-30.908-58.067-56.195-60.536-56.195s-9.084 4.317-14.701 9.594l-10.213 9.594-28.24-86.279c-15.532-47.454-27.608-87.087-26.836-88.074s40.804 11.6 88.96 27.972l87.556 29.766-23.574 24.606 58.814 58.673c40.599 40.502 60.329 57.158 63.707 53.78 3.169-3.169 4.445-43.010 3.622-113.105l-1.271-108.212-15.623-1.5c-8.593-0.825-14.964-3.117-14.157-5.093 9.459-23.18 77.777-156.215 80.223-156.215 1.802 0 21.514 36.101 43.803 80.224l40.526 80.224h-33.311v110.62c0 75.877 1.643 111.635 5.231 113.853 5.325 3.291 117.465-104.774 117.465-113.197 0-2.469-4.398-9.17-9.772-14.891l-9.772-10.402 86.139-28.76c47.376-15.818 86.8-28.099 87.608-27.291 1.113 1.113-35.978 118.406-53.063 167.796-1.753 5.069-5.042 4.016-14.132-4.524l-11.847-11.129-58.705 58.793c-32.431 32.48-57.171 60.905-55.277 63.512 2.173 2.991 43.509 4.147 112.885 3.156l109.457-1.563 2.884-31.399 164.278 85.646-164.278 82.323-2.929-31.984h-110.335c-60.684 0-111.409 1.738-112.721 3.861s23.979 30.163 56.203 62.31l58.589 58.448 11.822-11.107c9.126-8.573 12.377-9.6 14.252-4.501 16.298 44.31 56.701 169.414 54.712 169.414-1.441 0-41.55-12.976-89.131-28.835l-86.511-28.835 24.181-25.239-58.383-58.243c-33.703-33.622-60.595-56.875-63.616-55.008-3.568 2.205-5.233 35.426-5.233 104.416v101.182h16.517c9.084 0 16.517 1.352 16.517 3.004 0 5.271-82.472 162.080-85.267 162.123-1.475 0.023-20.058-35.529-41.294-79.004z"></path>
                </svg>
                </label>
                <label id="Dark_Eldar_Button" title="Dark Eldar" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Dark Eldar">
                <input type="checkbox" name="options" id="option5"><svg class="" style="display: inline-block; vertical-align: middle;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(128, 0, 128);" d="M422.216 1013.939c-1.123-5.534-4.238-31.415-6.922-57.514-8.466-82.329-39.798-173.449-65.413-190.233-25.052-16.415-62.753 3.61-78.549 41.721-11.198 27.017-16.972 24.49-17.123-7.494-0.133-28.201-11.949-103.589-18.485-117.933-11.655-25.58-42.899-18.867-59.241 12.73l-9.189 17.766-5.318-18.369c-13.011-44.94-30.93-58.961-43.366-33.932-3.36 6.763-8.858 27.389-12.218 45.834l-6.108 33.537-3.412-41.859c-1.877-23.022-5.732-44.654-8.567-48.070s-12.826-6.211-22.203-6.211c-38.030 0-49.559 14.753-45.556 58.296 2.667 29.014 0.536 28.185-11.922-4.637-17.89-47.133-16.44-50.376 89.003-198.987 76.99-108.509 101.351-150.878 96.915-168.554-3.33-13.267-25.68-23.416-62.035-28.171-11.576-1.514-25.345-6.233-30.598-10.486l-9.551-7.734 16.155-41.342c19.863-50.831 27.916-88.088 34.307-158.706 2.714-29.99 5.571-55.2 6.348-56.022 4.321-4.571 8.839 60.389 8.71 125.251l-0.147 74.569 31.449-0.285c17.297-0.156 41.753 1.151 54.347 2.906l22.898 3.191 15.765-19.344c8.671-10.639 33.001-47.996 54.066-83.014 34.5-57.349 82.044-130.846 84.643-130.846 0.556 0 0.998 15.595 0.982 34.655-0.018 19.060 1.531 39.686 3.439 45.834 3.033 9.776-4.229 21.004-57.838 89.432-79.311 101.235-82.020 105.356-81.99 124.711 0.040 26.294 8.227 49.682 17.389 49.682 8.896 0 47.697-32.387 125.677-104.903 28.283-26.301 54.736-49.636 58.784-51.856 6.774-3.714 6.835-2.35 0.766 17.113-4.477 14.36-5.898 32.284-4.427 55.84l2.167 34.692-78.951 54.299c-43.423 29.864-79.827 55.038-80.897 55.942s-3.447 25.65-5.28 54.993c-4.986 79.788-19.221 104.39-67.426 116.528-24.974 6.288-76.577 3.657-96.872-4.94-14.876-6.302-15.161-6.196-30.183 11.152-25.44 29.379-19.84 35.622 36.258 40.423 93.521 8.005 171.917-28.442 201.86-93.846 6.068-13.254 12.575-38.721 14.672-57.42 5.504-49.081 8.404-52.864 96.48-125.892 30.175-25.019 26.603-18.658-15.126 26.942-37.817 41.325-45.036 57.797-45.074 102.847-0.018 19.675 1.449 37.891 3.256 40.481s10.605 9.153 19.551 14.587c8.946 5.433 18.913 13.069 22.149 16.968 5.299 6.385 3.334 6.77-19.792 3.881-21.305-2.662-27.168-1.857-34.446 4.729-11.253 10.184-11.276 31.726-0.052 48.753 11.477 17.41 7.717 21.783-11.739 13.654-8.777-3.667-19.485-6.668-23.797-6.668-6.752 0-57.461 21.029-88.089 36.53-13.569 6.867-14.39 11.053-8.191 41.723l5.423 26.83 28.654 0.3c38.57 0.404 37.396 0.069 55.242 15.739 19.855 17.433 37.889 71.054 51.002 151.647 9.684 59.514 16.761 138.62 12.401 138.62-1.444 0-3.544-4.528-4.667-10.061zM192.090 453.044c13.779-14.445 28.352-32.646 32.385-40.445 7.901-15.278 9.852-36.983 3.325-36.983-6.281 0-31.211 30.176-54.871 66.42-35.192 53.909-26.514 58.894 19.161 11.009z"></path>
                </svg>
                </label>
                <label id="Eldar_Button" title="Eldar" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Eldar">
                <input type="checkbox" name="options" id="option6"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -9px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(255, 255, 0);" d="M416.146 843.98v-180.018l-151.963 0.020-84.333 137.917-38.491 1.358c-21.17 0.747-38.491 0.272-38.491-1.056s19.868-32.448 44.152-69.157l44.152-66.743-95.585-1.264c-52.572-0.695-95.586-2.303-95.586-3.574s35.77-55.905 79.489-121.408c43.719-65.504 79.489-120.18 79.489-121.503s-30.51-2.405-67.799-2.405h-67.799v-88.84h204.294l115.666-163.653c63.616-90.009 117.265-163.653 119.22-163.653s52.609 73.644 112.565 163.653l109.011 163.653h213.619v88.609l-149.793 2.57 81.91 120.329c45.051 66.181 81.91 121.414 81.91 122.74s-43.134 2.41-95.854 2.41c-52.72 0-95.854 0.919-95.854 2.041s18.937 31.651 42.082 67.841c23.145 36.19 42.082 66.833 42.082 68.096s-17.745 2.296-39.433 2.296h-39.433l-86.955-140.274h-156.809v360.037h-65.461v-180.018zM282.248 527.194l35.298-57.279-12.35-9.352c-6.792-5.143-20.433-16.485-30.312-25.204s-18.604-15.031-19.389-14.027c-3.382 4.323-104.376 152.004-107.569 157.295-2.737 4.535 7.964 5.845 47.749 5.845h51.276l35.298-57.279zM416.146 543.454v-41.019l-43.138-10.009-15.091 23.813c-8.3 13.097-20.887 33.808-27.971 46.023l-12.88 22.21h99.080v-41.019zM579.799 580.774c0-2.034-10.238-21.497-22.751-43.251l-22.751-39.552-22.838 1.648c-12.561 0.906-24.416 2.608-26.345 3.783s-3.507 19.896-3.507 41.603v39.468h49.096c27.003 0 49.096-1.664 49.096-3.699zM756.154 580.966c-15.68-29.286-103.814-169.498-106.542-169.498-2.047 0-5.14 4.47-6.874 9.933s-13.582 19.881-26.33 32.040l-23.177 22.106 71.022 108.925h46.889c25.789 0 46.045-1.578 45.012-3.507zM515.479 477.235c66.284-16.952 107.032-46.461 113.772-82.39 3.704-19.743-1.109-32.030-21.762-55.552-12.716-14.482-44.184-35.368-53.288-35.368-1.425 0 2.677 7.96 9.116 17.689s13.058 27.548 14.709 39.597c2.812 20.515 1.977 22.933-13.135 38.044-24.074 24.074-58.11 32.474-120.093 29.638-54.49-2.493-75.576-7.461-98.979-23.318-29.372-19.901-30.004-57.117-1.456-85.665 9.134-9.134 15.52-17.696 14.191-19.025s-11.534 1.706-22.678 6.745c-31.304 14.156-51.404 36.442-60.046 66.575-8.443 29.44 18.886 63.058 73.574 90.505 44.19 22.178 109.171 27.079 166.075 12.525zM515.898 212.532c-29.767-42.551-54.716-76.743-55.44-75.982-7.317 7.684-113.556 146.447-112.744 147.259 0.597 0.597 15.713-1.194 33.59-3.981 37.732-5.883 153.239-2.837 170.44 4.495 6.429 2.74 13.172 5.116 14.983 5.279s-21.062-34.518-50.829-77.069z"></path>
                </svg>
                </label>
                <label id="Tau_Button" title="Tau" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Tau">
                <input type="checkbox" name="options" id="option7"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -15px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(112, 163, 204);" d="M605.766 1022.251c-0.849-2.021-0.485-127.147 0.81-278.056l2.354-274.381 44.846-20.197c110.791-49.895 145.205-88.015 155.438-172.176 5.661-46.559 1.424-105.34-12.344-171.25-8.278-39.631-8.277-40.883 0.051-40.883 10.99 0 87.162 53.174 122.393 85.439 113.023 103.511 180.44 279.126 163.217 425.167-9.303 78.885-35.977 152.466-78.976 217.858-25.126 38.212-100.989 113.165-142.774 141.061-73.866 49.314-128.026 69.521-236.185 88.12-9.507 1.635-17.981 1.319-18.83-0.703zM387.677 1009.46c-47.396-12.313-117.181-41.139-154.829-63.956-70.533-42.748-134.856-112.902-175.878-191.822-44.805-86.199-60.916-160.682-56.172-259.703 5.552-115.901 44.876-213.984 118.685-296.031 49.738-55.289 163.387-137.806 174.496-126.696 1.428 1.428-2.757 24.506-9.301 51.285-17.044 69.747-22.774 111.178-19.104 138.131 7.524 55.264 39.445 112.93 78.901 142.534 19.374 14.536 73.217 41.848 109.106 55.343l28.245 10.621 1.214 275.882 1.215 275.882-27.106-0.231c-14.908-0.127-46.171-5.184-69.473-11.238zM484.945 348.017c-85.77-31.622-120.517-78.749-119.938-162.669 0.347-50.384 11.499-84.503 38.982-119.272 36.917-46.704 88.685-69.318 150.404-65.702 131.945 7.73 208.135 143.737 147.881 263.986-15.891 31.714-44.367 58.336-80.864 75.601-40.721 19.263-97.050 22.588-136.465 8.056z"></path>
                </svg>
                </label>
                <label id="Tyranids_Button" title="Tyranids" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Tyranids">
                <input type="checkbox" name="options" id="option8"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -12px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(165, 42, 42);" d="M276.868 814.801c-17.336-3.005-18.612-4.091-14.288-12.169 5.354-10.004-1.181-17.802-14.917-17.802-9.1 0-10.347 1.301-10.347 10.787 0 12.786-6.436 13.908-28.693 5.003-16.206-6.484-16.015-6.2-10.292-15.362 5.923-9.485 1.303-18.406-9.533-18.406-6.49 0-10.193 2.636-12.602 8.971l-3.411 8.971-17.175-10.779c-37.817-23.733-88.574-86.208-107.978-132.909-5.106-12.288-4.55-12.001 17.596 9.092 12.578 11.979 30.587 27.047 40.021 33.483 35.148 23.981 88.29 43.618 118.041 43.618 12.46 0 13.367-0.782 15.63-13.484 1.321-7.416 6.722-26.932 12-43.368l9.597-29.884 4.51 24.437c4.914 26.626 13.794 41.901 25.365 43.629 7.332 1.096 56-21.295 59.859-27.539 1.101-1.782-6.058-16.789-15.91-33.35s-17.914-32.066-17.915-34.457c-0.002-2.468 8.019 0.638 18.565 7.191 24.638 15.309 46.759 15.617 66.030 0.919 18.5-14.11 24.424-30.127 24.667-66.689 0.252-38.058-2.739-50.34-12.263-50.34-5.445 0-8.187 3.929-11.57 16.578l-4.434 16.578-32.409-2.364c-47.995-3.501-67.371-6.292-64.097-9.233 1.608-1.443 10.835-5.246 20.506-8.449 28.52-9.448 47.97-22.763 57.831-39.59 4.997-8.526 9.085-18.718 9.085-22.65 0-17.559-34.556-33.694-71.587-33.425l-20.104 0.146 12.36 10.567c6.798 5.812 11.652 11.21 10.787 11.997s-8.045 4.705-15.956 8.707c-7.91 4.002-31.372 19.734-52.138 34.959l-37.755 27.683-35.057-1.384c-28.041-1.107-36.316-2.699-41.35-7.952-6.068-6.332-5.68-6.481 10.785-4.147 18.094 2.564 20.132 0.748 12.071-10.762-4.767-6.805-4.353-7.088 8.568-5.856 16.466 1.57 20.689-3.752 12.679-15.977l-5.955-9.089 16.433 2.464c17.803 2.67 19.597 0.574 10.558-12.33-5.665-8.088-5.595-8.298 1.95-5.903 4.303 1.366 14.227 1.401 22.055 0.079 13.074-2.209 14.23-3.329 14.218-13.774-0.033-27.303-26.111-49.91-55.72-48.303-15.429 0.838-18.138 2.099-19.105 8.894-0.707 4.965 1.64 9.645 6.293 12.551 10.761 6.72 9.132 10.095-4.872 10.095-23.882 0-30.059 7.483-16.39 19.854 8.891 8.046 3.092 13.537-11.146 10.555-5.095-1.067-13.76-0.231-19.255 1.859-9.656 3.671-9.798 4.094-4.22 12.607 3.174 4.844 5.772 9.558 5.772 10.474s-8.899 2.777-19.777 4.137c-10.877 1.359-19.777 3.785-19.777 5.392s4.993 6.828 11.095 11.604l11.095 8.683-40.76 2.267c-22.418 1.247-46.019 3.816-52.446 5.709s-11.686 2.795-11.686 2.005c0-0.79 3.188-7.553 7.085-15.031 4.011-7.696 9.485-30.809 12.617-53.272 10.49-75.222 27.265-115.584 64.798-155.897 67.937-72.972 158.728-94.134 270.513-63.053l35.721 9.932v31.475c0 22.877 1.581 33.889 5.789 40.31 12.47 19.031 46.071 11.525 67.44-15.066l11.874-14.776h71.819l12.417 14.507c6.83 7.979 18.826 17.776 26.659 21.772 12.116 6.181 16.087 6.656 26.609 3.184 6.802-2.245 14.237-7.576 16.523-11.847 3.925-7.334 5.817-52.429 2.649-63.138-1.043-3.526 8.919-8.141 34.49-15.978 33.54-10.279 39.824-11.033 93.488-11.222 51.411-0.181 60.142 0.698 82.075 8.271 47.328 16.341 100.378 59.568 126.396 102.992 16.493 27.527 25.529 57.018 34.634 113.038 6.109 37.59 11.041 55.262 20.33 72.857 0.73 1.383-4.039 0.935-10.598-0.996s-30.267-4.53-52.685-5.777l-40.76-2.267 11.095-8.683c6.102-4.776 11.095-9.998 11.095-11.604s-8.899-4.033-19.777-5.392c-18.763-2.345-24.173-6.003-16.181-10.943 1.978-1.222 3.596-5.234 3.596-8.916 0-7.033-17.939-13.531-25.114-9.097-2.043 1.263-7.076 1.23-11.182-0.074l-7.467-2.37 7.499-7.982c13.052-13.893 8.057-20.104-16.168-20.104-14.004 0-15.633-3.375-4.872-10.095 4.652-2.905 6.999-7.586 6.293-12.551-0.966-6.791-3.703-8.069-19.233-8.978-19.84-1.162-36.109 7.002-49.204 24.688-6.811 9.199-9.783 29.922-4.981 34.724 1.385 1.385 11.189 2.518 21.787 2.518 18.577 0 19.088 0.259 14.212 7.221-8.176 11.673-6.034 13.775 11.375 11.165l16.433-2.464-5.955 9.089c-8.045 12.278-3.792 17.548 12.877 15.958 12.436-1.186 13.269-0.754 8.568 4.44-9.735 10.757-6.309 14.18 11.873 11.861 16.494-2.103 16.864-1.951 10.785 4.437-5.061 5.319-13.237 6.893-41.75 8.038l-35.456 1.424-35.424-26.163c-19.484-14.39-43.675-30.503-53.76-35.808l-18.335-9.645 25.617-22.307-20.104-0.181c-36.538-0.328-71.586 15.804-71.586 32.95 0 23.46 28.33 50.222 66.143 62.481 10.096 3.273 19.671 7.149 21.279 8.612 3.425 3.117-18.025 6.178-66.499 9.488l-34.811 2.377-1.146-13.633c-1.307-15.545-11.612-25.28-17.227-16.274-5.089 8.162-8.41 48.443-5.56 67.446 3.219 21.465 9.456 33.617 23.185 45.169 21.349 17.964 49.102 15.525 78.501-6.899l12.114-9.24-11.46 22.702c-6.303 12.486-15.405 28.951-20.226 36.589-6.39 10.123-7.736 15.129-4.966 18.467 6.926 8.345 49.519 27.88 58.109 26.651 11.377-1.628 23.431-23.89 26.731-49.372l2.611-20.155 8.241 24.127c4.533 13.27 10.101 33.091 12.376 44.048 4.121 19.851 4.182 19.92 17.508 19.92 45.333 0 108.713-30.958 158.255-77.3l23.056-21.567-9.966 19.769c-27.596 54.736-61.497 96.406-99.84 122.718l-20.688 14.196-4.161-9.132c-2.752-6.041-7.046-9.132-12.685-9.132-10.064 0-14.655 9.137-9.078 18.067 4.681 7.495 2.933 9.678-13.144 16.409-19.457 8.146-25.63 6.771-25.63-5.71 0-9.487-1.247-10.787-10.347-10.787-13.736 0-20.271 7.799-14.917 17.802 3.068 5.732 2.917 7.853-0.65 9.096-6.106 2.129-26.511 3.323-42.961 2.514l-13.142-0.646 3.859-28.766h-12.674c-12.666 0-19.694 7.178-14.792 15.109 6.579 10.645-27.035 7.302-50.188-4.991-6.217-3.301-6.244-3.882-0.473-10.26 7.628-8.428 4.567-23.624-5.394-26.786-9.134-2.899-20.575 3.33-23.595 12.845-1.9 5.986-4.264 7.027-11.71 5.158-11.639-2.921-28.025-14.445-40.816-28.705-9.455-10.542-9.571-11.159-3.39-18.105 10.334-11.614 11.622-15.611 7.509-23.298-2.726-5.094-7.527-7.266-16.061-7.266-10.644 0-12.475 1.376-14.58 10.959-1.792 8.159-3.541 10.018-6.843 7.277-3.059-2.539-5.735-2.383-8.621 0.502-3.182 3.182-4.734 1.439-6.476-7.277-2-9.996-3.751-11.461-13.709-11.461-20.904 0-26.384 14.366-10.995 28.823l9.051 8.503-13.546 14.003c-13.926 14.397-35.97 27.776-45.763 27.776-3.107 0-5.537-3.101-5.537-7.065 0-8.638-12.117-15.713-21.702-12.671-8.371 2.657-13.286 18.548-7.52 24.314 8.203 8.203 3.526 13.301-18.371 20.023-26.411 8.108-31.513 6.973-31.513-7.007 0-9.563-1.053-10.403-13.058-10.403h-13.058l1.929 14.383c1.83 13.644 1.439 14.386-7.617 14.432-5.25 0.029-12.782 0.649-16.737 1.382s-11.237 0.631-16.181-0.225z"></path>
                </svg>
                </label>
                <label id="Necrons_Button" title="Necrons" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Necrons">
                <input type="checkbox" name="options" id="option9"><svg class="" style="display: inline-block; vertical-align: middle; margin-left: -10px;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(144, 238, 144);" d="M413.047 1019.092l-16.166-4.668v-501.971l-36.062-18.024c-19.834-9.913-39.896-21.404-44.581-25.536s-11.687-6.296-15.559-4.811c-3.872 1.486-33.163 34.097-65.092 72.47s-62.105 71.054-67.056 72.626c-15.341 4.869-25.327-2.285-25.327-18.144 0-16.065 11.312-34.018 62.129-98.602 18.297-23.254 38.49-51.233 44.873-62.176l11.607-19.896-22.769-69.637-228.606-2.667-6.48-19.636c-5.438-16.476-5.328-22.665 0.681-38.459l7.161-18.823 229.853-2.668 3.384-13.588c5.478-22 32.856-66.51 56.512-91.877l21.984-23.574-13.374-17.535c-16.703-21.899-35.639-62.998-41.815-90.758l-4.703-21.14h78.144l5.043 18.653c6.46 23.895 30.016 52.397 51.878 62.771 24.919 11.825 80.596 10.894 101.239-1.692 19.429-11.846 44.321-45.112 48.711-65.097 3.205-14.593 3.319-14.634 40.124-14.634 29.24 0 36.91 1.527 36.91 7.348 0 9.845-23.517 71.868-32.575 85.916-3.969 6.155-10.724 16.623-15.011 23.262-7.481 11.585-7.057 12.835 10.553 31.088 24.663 25.564 55.746 73.602 62.75 96.977l5.703 19.035h226.833l5.797 19.349c3.886 12.971 4.301 25.678 1.259 38.549l-4.538 19.2-228.439 2.813-11.609 28.438c-19.194 47.018-20.496 42.682 33.713 112.235 68.203 87.509 72.845 95.425 64.784 110.486-8.036 15.015-24.553 20.843-31.795 11.22-2.944-3.912-29.826-37.202-59.738-73.977s-55.136-67.839-56.053-69.030c-0.917-1.192-10.019 2.875-20.226 9.037s-32.548 17.792-49.646 25.843l-31.088 14.639v501.308l-15.664 5.461c-18.481 6.443-45.12 6.401-67.651-0.104zM487.375 421.92c25.63-7.679 60.258-38.609 73.234-65.414 12.314-25.436 14.127-79.223 3.526-104.594-9.803-23.462-36.294-51.914-59.231-63.616-25.921-13.224-67.081-17.211-95.508-9.252-27.206 7.617-63.871 38.603-77.66 65.631-28.76 56.374-8.369 131.838 44.672 165.321 10.189 6.432 22.881 12.803 28.204 14.157 18.713 4.761 63.447 3.554 82.763-2.233z"></path>
                </svg>
                </label>
                <label id="Neutral_Button" title="Neutral" class="faction-btn-container btn btn-default btn-sm" onclick="updateFactionSelection(this)" data-just_clicked="F" data-faction="Neutral">
                <input type="checkbox" name="options" id="option10"><svg class="" style="display: inline-block; vertical-align: middle;" width="50" height="30" viewBox="0 0 592 1024" xmlns="http://www.w3.org/2000/svg">
                    <path style="fill: rgb(136, 136, 136);" d="M245.654 969.83c-7.735-14.527-9.802-28.049-12.114-79.231-3.523-77.981-3.533-155.986-0.031-242.387 0.619-15.26 1.177-30.083 1.242-32.939 0.782-34.716 11.034-188.181 12.82-191.904 0.581-1.212 4.608-2.262 8.949-2.334s-55.771-113.093-11.070-57.198c0.963-0.617 27.495 2.544 26.756 1.391-0.273-0.426-23.525-0.763-51.67-0.748-30.084 0.015-51.856-1.038-52.829-2.557-1.378-2.149-2.133-34.87-1.975-85.597 0.018-5.522-0.123-13.691-0.311-18.154-0.577-13.685-0.854-119.505-0.321-122.907 0.275-1.758 0.246-3.594-0.065-4.079s-0.436-8.754-0.276-18.376c0.159-9.621 0.107-28.295-0.115-41.497s0.266-24.916 1.086-26.030c0.82-1.114 11.708-1.996 24.195-1.961s24.759 0.034 27.269-0.005c2.51-0.038 22.618-0.071 44.684-0.073s65.419-0.151 96.341-0.33c30.922-0.179 58.944-0.17 62.271 0.020l6.050 0.347 0.492 9.745c0.271 5.36 0.395 23.2 0.276 39.646-0.178 24.514 0.143 88.818 0.537 107.896 0.052 2.535 0.072 12.511 0.044 22.17s0.232 18.004 0.578 18.545c0.346 0.54 0.372 4.463 0.056 8.718s-0.382 9.219-0.147 11.033c1.54 11.901 0.034 98.919-1.742 100.618-2.019 1.932-51.74 3.152-84.442 2.072-7.627-0.252-15.274 0.443-16.994 1.546-2.326 1.491 40.064-17.62 31.169-0.34l-16.59 59.848 18.192 4.271-10.077-7.037 2.496 25.254c1.373 13.89 3.149 33.943 3.947 44.562s1.911 25.441 2.473 32.938c2.035 27.147 7.052 113.798 7.115 122.89 0.036 5.124 0.323 9.719 0.639 10.212s0.661 9.388 0.767 19.768c0.106 10.38 0.405 19.203 0.664 19.607s0.752 13.761 1.095 29.681c0.343 15.92 0.663 30.528 0.71 32.462 1.518 61.75-2.298 179.949-6.332 196.118-4.906 19.665-25.683 45.833-47.493 59.813l-13.544 8.682-9.751-6.249c-21.177-13.571-34.006-27.226-45.025-47.922zM4.939 374.142c-1.157-4.496-2.276-30.87-2.487-58.609s-0.449-58.892-0.528-69.23c-0.257-33.389-0.615-107.249-0.642-132.484-0.015-13.506-0.036-32.509-0.046-42.229s-0.405-18.275-0.877-19.011c-2.056-3.208 5.188-25.019 10.773-32.433 9.18-12.188 20.664-16.979 42.448-17.707 9.805-0.328 20.929-0.189 24.721 0.308 11 1.441 22.326 8.607 30.35 19.201 6.343 8.375 7.415 11.223 8.303 22.058 0.89 10.862 1.257 43.291 0.695 61.471-0.103 3.347 0.023 28.979 0.283 56.961s0.528 70.126 0.597 93.652c0.070 23.527 0.257 56.776 0.417 73.886s-0.301 34.672-1.025 39.025c-2.427 14.608-12.574 27.125-27.357 33.748-8.944 4.007-35.076 5.625-49.109 3.040-17.901-3.297-32.466-15.922-36.513-31.648zM475.846 356.757c-0.321-8.285-0.556-32.051-0.523-52.814s-0.195-38.15-0.509-38.64c-0.314-0.49-0.292-6.034 0.050-12.321s0.399-30.849 0.129-54.583c-0.27-23.734-0.508-49.028-0.528-56.209s-0.146-31.469-0.28-53.973c-0.348-58.719 1.978-67.339 21.564-79.894 10.782-6.912 26.602-9.46 48.822-7.864 21.419 1.539 41.532 17.483 44.605 35.361 0.567 3.299 1.216 28.129 1.443 55.178s0.447 51.741 0.49 54.873c0.043 3.132 0.184 29.006 0.313 57.498s0.396 75.272 0.594 103.955c0.198 28.683-0.429 56.043-1.393 60.801-3.332 16.452-15.93 30.678-30.762 34.737-8.368 2.29-44.264 2.955-50.405 0.934-11.22-3.693-18.774-9.741-25.741-20.61-6.492-10.127-7.35-13.008-7.87-26.43z"></path>
                </svg>
                </label>
            </div>
        </div>
        <div id="card-filter-results">
            <div class="searched-card-headers">
                <div class="mini-card-name">
                    Card Name
                </div>
                <div class="mini-card-type">
                    Card Type
                </div>
                <div class="mini-card-cost">
                    Cost
                </div>
                <div class="mini-card-attack">
                    ATK
                </div>
                <div class="mini-card-health">
                    HP
                </div>
                <div class="mini-card-command">
                    CMD
                </div>
                <div class="mini-card-shields">
                    SHLD
                </div>
            </div>
        </div>
        <div id="card-counts-pages">
            <p>Showing 0-0 of 0 matches</p>
        </div>
        <div class="center">
            Number of rows per page:<select name="num-rows" class="num-rows" id="num-rows" onchange="updateMaxRows(this)">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20" selected="selected">20</option>
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="200">200</option>
                <option value="500">500</option>
                <option value="1000">1000</option>
                <option value="2000">2000</option>
            </select>
        </div>
        <div id="buttons-container">
            <input id="prev-page" type="button" value="Previous Page" onclick="previousPage();">
            <input id="next-page" type="button" value="Next Page" onclick="nextPage();">
        </div>
    </div>
</div>
<img id="cursor-follower" src="/static/images/CardImages/Cardback.jpg">
<script>
    const pledges_array = ["/static/images/CardImages/Anvil_Strike_Force.jpg",
                           "/static/images/CardImages/Gladius_Strike_Force.jpg",
                           "/static/images/CardImages/Talon_Strike_Force.jpg",
                           "/static/images/CardImages/Holy_Crusade.jpg",
                           "/static/images/CardImages/Munitorum_Support.jpg",
                           "/static/images/CardImages/Senatorum_Directives.jpg",
                           "/static/images/CardImages/WAAAGH!_Arbuttz.jpg",
                           "/static/images/CardImages/WAAAGH!_Zanzag.jpg",
                           "/static/images/CardImages/WAAAGH!_Ungskar.jpg",
                           "/static/images/CardImages/Dark_Allegiance.jpg",
                           "/static/images/CardImages/Myriad_Excesses.jpg",
                           "/static/images/CardImages/Unstoppable_Tide.jpg",
                           "/static/images/CardImages/Prophets_of_Flesh.jpg",
                           "/static/images/CardImages/The_Broken_Sigil.jpg",
                           "/static/images/CardImages/The_Flayed_Mask.jpg",
                           "/static/images/CardImages/Children_of_the_Stars.jpg",
                           "/static/images/CardImages/Followers_of_Asuryan.jpg",
                           "/static/images/CardImages/Ghosts_of_Cegorach.jpg",
                           "/static/images/CardImages/Bork'an_Sept.jpg",
                           "/static/images/CardImages/Dal'yth_Sept.jpg",
                           "/static/images/CardImages/Vior'la_Sept.jpg",
                           "/static/images/CardImages/Hive_Fleet_Behemoth.jpg",
                           "/static/images/CardImages/Hive_Fleet_Kraken.jpg",
                           "/static/images/CardImages/Hive_Fleet_Leviathan.jpg",
                           "/static/images/CardImages/Maynarkh_Dynasty.jpg",
                           "/static/images/CardImages/Novokh_Dynasty.jpg",
                           "/static/images/CardImages/Sautekh_Dynasty.jpg"];

    var current_page_number = 0;
    var max_page_number = 0;
    var max_rows = "20";
    var current_max_rows = 20;
    var stored_image_links = [];
    var stored_image_names = [];
    var stored_card_names = [];
    var stored_card_types = [];
    var stored_card_loyalties = [];
    var stored_card_factions = [];
    var stored_card_attacks = [];
    var stored_card_healths = [];
    var stored_card_costs = [];
    var stored_card_commands = [];
    var stored_card_shields = [];
    var num_matches = 0;
    var current_low_match = 0;
    var current_high_match = 0;
    var cards_in_deck = 0;

    var mouse_x = 0;
    var mouse_y = 0;
    onmousemove = function(e){
        mouse_x = e.clientX + window.scrollX;
        mouse_y = e.clientY * (0.5) + 320 + window.scrollY;
    }

    function makeDeckSticky(button) {
        var e = document.getElementById("deck-container");
        if (e.style.position === "fixed") {
            e.style.position = "absolute";
            button.value = "Lock Deck";
        } else {
            e.style.position = "fixed";
            button.value = "Unlock Deck";
        }
    }

    function getFactionSelections() {
        var element = document.getElementById("faction_code");
        var childrenElements = element.children;
        var className = "";
        var factions = [];
        var include_faction = [];
        for (let i = 0; i < childrenElements.length; i++) {
            className = childrenElements[i].className;
            factions.push(childrenElements[i].dataset.faction);
            if (className.includes("active")) {
                include_faction.push("Y");
            } else {
                include_faction.push("N");
            }
        }
        // console.log(factions);
        // console.log(include_faction);
        var final_array = [factions, include_faction];
        return final_array;
    }

    function getTypeSelections() {
        var element = document.getElementById("type_code");
        var childrenElements = element.children;
        var className = "";
        var factions = [];
        var include_faction = [];
        for (let i = 0; i < childrenElements.length; i++) {
            className = childrenElements[i].className;
            factions.push(childrenElements[i].dataset.faction);
            if (className.includes("active")) {
                include_faction.push("Y");
            } else {
                include_faction.push("N");
            }
        }
        var final_array = [factions, include_faction];
        return final_array;
    }

    function updateFactionSelection(element) {
        var className = element.className;
        console.log(element.dataset.just_clicked);
        console.log(element.className);
        if (element.dataset.just_clicked === "F") {
            element.dataset.just_clicked = "T";
            if (className.includes("active")) {
                element.className = "faction-btn-container btn btn-default btn-sm";
            } else {
                element.className = "faction-btn-container btn btn-default btn-sm active";
            }
        } else {
            element.dataset.just_clicked = "F";
        }
        document.getElementById('send-filter').click();
    }

    function clearSynapse() {
        document.getElementById('synapse-card').innerHTML = `<img id="Cardback" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image">`;
        clearImg();
    }

    function clearPledge() {
        document.getElementById('pledge-card').innerHTML = `<img id="Cardback_Two" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image">`;
        clearImg();
    }

    function clearFilters() {
        var searchInput = document.getElementById("searchInput");
        searchInput.value = "";
        var searchInput = document.getElementById("order");
        searchInput.value = "None";
        var searchInput = document.getElementById("asc-desc");
        searchInput.value = "Ascending";
        var searchInput = document.getElementById("keywordInput");
        searchInput.value = "None";
        var searchInput = document.getElementById("minCostInput");
        searchInput.value = "";
        var searchInput = document.getElementById("maxCostInput");
        searchInput.value = "";
        var searchInput = document.getElementById("shieldInput");
        searchInput.value = "-1";
        var searchInput = document.getElementById("traitsInput");
        searchInput.value = "";
    }

    function updateMaxRows(e) {
        max_rows = e.value;
    }

    function previousPage() {
        if (current_page_number !== 0) {
            current_page_number = current_page_number - 1;
            current_low_match = current_low_match - current_max_rows;
            current_high_match = (current_page_number + 1) * current_max_rows;
            page_counter = document.getElementById("card-counts-pages");
            page_counter.innerHTML = `<p>Showing ` + current_low_match + `-` + current_high_match + ` of ` + num_matches + ` matches</p>`;
            e = document.getElementById("card-filter-results");
            e.innerHTML = ``;
            var img_src = "";
            var new_string = "";
            var new_id = "";
            var new_card_name = "";
            var new_card_type = "";
            var new_loyalty = "";
            var new_faction = "";
            var new_cost = "";
            var new_attack = "";
            var new_health = "";
            var new_command = "";
            var new_shield = "";
            new_string += `
            <div class="searched-card-headers">
                <div class="mini-card-name">
                    Card Name
                </div>
                <div class="mini-card-type">
                    Card Type
                </div>
                <div class="mini-card-cost">
                    Cost
                </div>
                <div class="mini-card-attack">
                    ATK
                </div>
                <div class="mini-card-health">
                    HP
                </div>
                <div class="mini-card-command">
                    CMD
                </div>
                <div class="mini-card-shields">
                    SHLD
                </div>
            </div>`
            for (let i = 0; i < stored_image_links[current_page_number].length; i++) {
                img_src = stored_image_names[current_page_number][i];
                new_card_name = stored_card_names[current_page_number][i];
                new_card_type = stored_card_types[current_page_number][i];
                new_loyalty = stored_card_loyalties[current_page_number][i];
                new_faction = stored_card_factions[current_page_number][i];
                new_cost = stored_card_costs[current_page_number][i];
                new_attack = stored_card_attacks[current_page_number][i];
                new_health = stored_card_healths[current_page_number][i];
                new_command = stored_card_commands[current_page_number][i];
                new_shield = stored_card_shields[current_page_number][i];
                new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + new_card_name.split(' ').join('_') + `>`
                new_string += `<div class="mini-card-name">` + new_card_name + `</div>`
                new_string += `<div class="mini-card-type">` + new_card_type + `</div>`
                new_string += `<div class="mini-card-cost">` + new_cost + `</div>`
                new_string += `<div class="mini-card-attack">` + new_attack + `</div>`
                new_string += `<div class="mini-card-health">` + new_health + `</div>`
                new_string += `<div class="mini-card-command">` + new_command + `</div>`
                new_string += `<div class="mini-card-shield">` + new_shield + `</div>`
                new_string += `</div>`;
            }
            e.innerHTML += new_string;
        }
    }

    function nextPage() {
        if (current_page_number !== max_page_number) {
            current_page_number = current_page_number + 1;
            e = document.getElementById("card-filter-results");
            e.innerHTML = ``;
            current_low_match = current_low_match + current_max_rows;
            current_high_match = (current_page_number + 1) * current_max_rows;
            if (current_high_match > num_matches) {
                current_high_match = num_matches;
            }
            page_counter = document.getElementById("card-counts-pages");
            page_counter.innerHTML = `<p>Showing ` + current_low_match + `-` + current_high_match + ` of ` + num_matches + ` matches</p>`;
            var img_src = "";
            var new_string = "";
            var new_id = "";
            var new_card_name = "";
            var new_card_type = "";
            var new_loyalty = "";
            var new_faction = "";
            var new_cost = "";
            var new_attack = "";
            var new_health = "";
            var new_command = "";
            var new_shield = "";
            new_string += `
            <div class="searched-card-headers">
                <div class="mini-card-name">
                    Card Name
                </div>
                <div class="mini-card-type">
                    Card Type
                </div>
                <div class="mini-card-cost">
                    Cost
                </div>
                <div class="mini-card-attack">
                    ATK
                </div>
                <div class="mini-card-health">
                    HP
                </div>
                <div class="mini-card-command">
                    CMD
                </div>
                <div class="mini-card-shields">
                    SHLD
                </div>
            </div>`
            for (let i = 0; i < stored_image_links[current_page_number].length; i++) {
                // console.log(current_page_number);
                // console.log(stored_card_names);
                img_src = stored_image_names[current_page_number][i];
                new_card_name = stored_card_names[current_page_number][i];
                new_card_type = stored_card_types[current_page_number][i];
                new_loyalty = stored_card_loyalties[current_page_number][i];
                new_faction = stored_card_factions[current_page_number][i];
                new_cost = stored_card_costs[current_page_number][i];
                new_attack = stored_card_attacks[current_page_number][i];
                new_health = stored_card_healths[current_page_number][i];
                new_command = stored_card_commands[current_page_number][i];
                new_shield = stored_card_shields[current_page_number][i];
                new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + new_card_name.split(' ').join('_') + `>`
                new_string += `<div class="mini-card-name">` + new_card_name + `</div>`
                new_string += `<div class="mini-card-type">` + new_card_type + `</div>`
                new_string += `<div class="mini-card-cost">` + new_cost + `</div>`
                new_string += `<div class="mini-card-attack">` + new_attack + `</div>`
                new_string += `<div class="mini-card-health">` + new_health + `</div>`
                new_string += `<div class="mini-card-command">` + new_command + `</div>`
                new_string += `<div class="mini-card-shield">` + new_shield + `</div>`
                new_string += `</div>`;
            }
            e.innerHTML += new_string;
        }
    }

    function showImg(el) {
        var new_src = el.getAttribute('data-src');
        cursor_img = document.getElementById("cursor-follower");
        if (pledges_array.includes(new_src)) {
            cursor_img.style.rotate = "270deg";
            cursor_img.style.left = mouse_x + 150 + "px";
            cursor_img.style.top = mouse_y - 300 + "px";
        } else {
            cursor_img.style.rotate = "0deg";
            cursor_img.style.left = mouse_x + 30 + "px";
            cursor_img.style.top = mouse_y - 300 + "px";
        }
        cursor_img.src = new_src;
        cursor_img.style.display = "block";
    }

    function clearImg() {
        cursor_img = document.getElementById("cursor-follower");
        cursor_img.src = "/static/images/CardImages/Cardback.jpg";
        cursor_img.style.display = "none";
    }

    var data = "{{ data }}";
    var name_warlord = "";
    var force_send = "F";
    var sent_sig_squad = {{ warlord_sig|safe }};
    var sent_warlord = "{{ warlord_name }}";
    sent_warlord = sent_warlord.replace(new RegExp("&"+"#"+"x27;", "g"), "'");
    if (sent_warlord !== "") {
        name_warlord = sent_warlord.split('_').join(' ');
        var route = "/static/images/CardImages/" + name_warlord.split(' ').join('_') + ".jpg";
        document.getElementById('warlord-card').innerHTML = `<img id=` + name_warlord.split(' ').join('_') + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + route + `>`;
        addSigSquad(sent_sig_squad);
    }
    if (data !== "") {
        force_send = "T";
        data = data.replace(new RegExp("&"+"#"+"x27;", "g"), "'");
        var deck_data = data.split("|||");
        var pledge_card = "";
        if (deck_data[4] !== "") {
            pledge_card = deck_data[4];
        }
        deck_data = deck_data.filter(function(a){return a !== "----------------------------------------------------------------------"});
        deck_data = deck_data.filter(function(a){return a !== "Planet"});
        deck_data = deck_data.filter(function(a){return a !== ""});
        // console.log(deck_data);
        const name = deck_data[0];
        name_warlord = deck_data[1];
        var factions = deck_data[2];
        var split_factions = factions.split(" (");
        if (split_factions.length === 2) {
            const ally = split_factions[1].replace(")", "");
            // console.log(ally);
            document.getElementById('ally').value = ally;
        }
        route = "/static/images/CardImages/" + name_warlord.split(' ').join('_') + ".jpg";
        document.getElementById('warlord-card').innerHTML = `<img id=` + name_warlord.split(' ').join('_') + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + route + `>`;
        document.getElementById('name-deck').value = name;
        var sig_pos = -1;
        var army_pos = -1;
        var support_pos = -1;
        var synapse_pos = -1;
        var attachment_pos = -1;
        var event_pos = -1;
        for (let i = 0; i < deck_data.length; i++) {
            if (deck_data[i] === "Signature Squad") {
                sig_pos = i;
            }
            if (deck_data[i] === "Army") {
                army_pos = i;
            }
            if (deck_data[i] === "Support") {
                support_pos = i;
            }
            if (deck_data[i] === "Synapse") {
                synapse_pos = i;
            }
            if (deck_data[i] === "Attachment") {
                attachment_pos = i;
            }
            if (deck_data[i] === "Event") {
                event_pos = i;
            }
        }
        var sig_cards = deck_data.slice(sig_pos+1, army_pos);
        var army_cards = deck_data.slice(army_pos+1, support_pos);
        var support_cards = deck_data.slice(support_pos+1, synapse_pos);
        var synapse_cards = deck_data.slice(synapse_pos+1, attachment_pos);
        var attachment_cards = deck_data.slice(attachment_pos+1, event_pos);
        var event_cards = deck_data.slice(event_pos+1, deck_data.length);
        addSigSquad(sig_cards);
        for (let i = 0; i < army_cards.length; i++) {
            var card_name = army_cards[i].slice(3);
            var card_amount = parseInt(army_cards[i].charAt(0));
            for (let j = 0; j < card_amount; j++) {
                addCard("Army", card_name);
            }
        }
        for (let i = 0; i < support_cards.length; i++) {
            var card_name = support_cards[i].slice(3);
            var card_amount = parseInt(support_cards[i].charAt(0));
            for (let j = 0; j < card_amount; j++) {
                addCard("Support", card_name);
            }
        }
        for (let i = 0; i < attachment_cards.length; i++) {
            var card_name = attachment_cards[i].slice(3);
            var card_amount = parseInt(attachment_cards[i].charAt(0));
            for (let j = 0; j < card_amount; j++) {
                addCard("Attachment", card_name);
            }
        }
        for (let i = 0; i < event_cards.length; i++) {
            var card_name = event_cards[i].slice(3);
            var card_amount = parseInt(event_cards[i].charAt(0));
            for (let j = 0; j < card_amount; j++) {
                addCard("Event", card_name);
            }
        }
        if (synapse_cards.length === 1) {
            var synapseName = synapse_cards[0].slice(3).split(' ').join('_');
            route = "/static/images/CardImages/" + synapseName + ".jpg";
            document.getElementById('synapse-card').innerHTML = `<img id=` + synapseName + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" onclick="clearSynapse()" data-src=` + route + `>`
        }
        if (pledge_card !== "" && pledge_card !== "----------------------------------------------------------------------") {
            pledge_card = pledge_card.split(' ').join('_');
            route = "/static/images/CardImages/" + pledge_card + ".jpg";
            document.getElementById('pledge-card').innerHTML = `<img id=` + pledge_card + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" onclick="clearPledge()" data-src=` + route + `>`
        }
    }

    document.querySelector('#card-input').focus();
    document.querySelector('#card-input').onkeyup = function(e) {
        if (e.key === 'Enter') {  // enter, return
            document.querySelector('#card-submit').click();
        }
    };

    function quickAddCard(el) {
        const cardName = el.getAttribute('data-name').split('_').join(' ');
        document.querySelector('#card-input').value = cardName;
        document.querySelector('#card-submit').click();
    }

    function decreaseCount(id) {
        var idName = id.slice(0,-9)
        var countName = idName + "-Count";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "1") {
                str = decrementString(str);
                e.innerHTML = str;
            } else {
                var holderName = idName + "-Holder";
                var x = document.getElementById(holderName);
                x.remove();
            }
            cards_in_deck = cards_in_deck - 1;
            update_card_count_div();
        }
    }

    function update_card_count_div(){
        var e = document.getElementById("card-count");
        e.innerHTML = cards_in_deck;
    }

    function selectElement(id, valueToSelect) {
        let element = document.getElementById(id);
        element.value = valueToSelect;
    }

    function incrementCount(id) {
        var idName = id.slice(0,-9)
        var countName = idName + "-Count";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "3") {
                str = incrementString(str);
                e.innerHTML = str;
                cards_in_deck = cards_in_deck + 1;
                update_card_count_div();
            }
        }
    }

    function setInitialDeck() {
        document.querySelector('#chat-log').value = ""
        document.querySelector('#chat-log').value += '\n----------------------------------------------------------------------\n\n\n----------------------------------------------------------------------\n';
        document.querySelector('#chat-log').value += 'Signature Squad\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Army\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Support\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Synapse\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Attachment\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Event\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Planet\n\n----------------------------------------------------------------------\n'
    }

    setInitialDeck();

    function notCheckedAlly() {
        document.querySelector('#ok-ally').innerHTML = "Checking...";
        sendAlly();
    }

    function sendDeckAuto() {
        addSavedDeck();
        sendDeck();
    }

    function addSavedDeck() {
        document.getElementById("chat-log").value = "";
        const name = document.getElementById("name-deck").value;
        document.getElementById("chat-log").value += name;
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n"
        const warlord_name = document.getElementById("warlord-card").children[0].id;
        document.getElementById("chat-log").value += warlord_name.split('_').join(' ');
        document.getElementById("chat-log").value += "\n{AUTOMAIN}";
        var e = document.getElementById("ally");
        if (e.selectedIndex != -1) {
            var text = e.options[e.selectedIndex].text;
            if (text !== "") {
                document.getElementById("chat-log").value += " (" + text + ")";
            }
        }
        const pledge_name = document.getElementById("pledge-card").children[0].id;
        if (pledge_name !== "Cardback_Two") {
            document.getElementById("chat-log").value += "\n";
            document.getElementById("chat-log").value += pledge_name.split('_').join(' ');
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n"
        document.getElementById("chat-log").value += "Signature Squad\n\n";
        var elements = document.getElementById("signature-squad-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    // console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Army\n\n";
        var elements = document.getElementById("army-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    // console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Support\n\n";
        var elements = document.getElementById("support-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    // console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Synapse\n\n";
        const synapse_name = document.getElementById("synapse-card").children[0].id;
        if (synapse_name != "Cardback") {
            document.getElementById("chat-log").value += "1x " + synapse_name.split('_').join(' ');
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Attachment\n\n";
        var elements = document.getElementById("attachment-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    // console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Event\n\n";
        var elements = document.getElementById("event-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    // console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Planet\n\n";
    }

    function sendDeck() {
        var chat_holder = document.querySelector('#chat-log').value;
        const name = document.getElementById("name-deck").value;
        if (name === "") {
            $('#responseMessage').text("Please give your deck a name");
        } else {
            $.ajax({
                url: '/decks/ajax/',  // The URL of the Django view that handles the request
                type: 'POST',
                data: {
                    'warlord_name': name_warlord,
                    'ally_faction': $('#ally').val(),
                    'username': $('#username').val(),
                    'deck_text': chat_holder,
                    'description': $('#descriptionInput').val(),
                    'flag': 'SENDDECK',
                    'force_send': force_send,
                    'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
                },
                success: function(response) {
                    $('#responseMessage').text(response.message);  // Update the page dynamically
                    const message = response.message;
                    force_send = "F";
                    if (message === "deck with that name already exists") {
                        force_send = "T";
                    } else if (message === "deck ok") {
                        location.href = "/decks/my_decks/";
                    }
                }
            });
        }
    }

    function incrementString(str) {
        var count = str.match(/\d*$/);
        return str.substr(0, count.index) + (++count[0]);
    };

    function decrementString(str) {
        var count = str.match(/\d*$/);
        return str.substr(0, count.index) + (--count[0]);
    };

    function addSigSquad(signature_squad) {
        cards_in_deck = 0;
        for (var i = 0; i < signature_squad.length; i++){
            var sig_copies = signature_squad[i][0];
            var sig_card_name = signature_squad[i].slice(3);
            var sig_image_name = sig_card_name.split(' ').join('_');
            var img_src = "/static/images/CardImages/" + sig_image_name + ".jpg";
            var cardName = sig_card_name;
            var idName = sig_card_name.split(' ').join('_');
            var countName = idName + "-Count";
            var holderName = idName + "-Holder";
            for (var j = 0; j < sig_copies; j++){
                var e = document.getElementById(countName);
                if (typeof(e) != 'undefined' && e != null) {
                    var str = e.innerHTML;
                    str = incrementString(str);
                    e.innerHTML = str;
                    cards_in_deck = cards_in_deck + 1;
                } else {
                    cards_in_deck = cards_in_deck + 1;
                    var newPart = `<div class="card-name-and-count" id=`;
                    newPart += holderName;
                    newPart += `><div id=`;
                    newPart += idName + "-Count";
                    newPart += ` class="no-break">1`;
                    newPart += `</div><div class="no-break">x </div><div id=`;
                    newPart += idName;
                    newPart += ` class="no-break" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + `>`;
                    newPart += cardName;
                    newPart += `</div></div>`
                    document.getElementById("signature-squad-cards").innerHTML += newPart;
                }
            }
        }
        update_card_count_div();
    }

    function addCard(card_type, cardName) {
        var idName = cardName.split(' ').join('_');
        var img_src = "/static/images/CardImages/" + idName + ".jpg";
        var countName = idName + "-Count";
        var holderName = idName + "-Holder";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "3") {
                str = incrementString(str);
                e.innerHTML = str;
                cards_in_deck = cards_in_deck + 1;
                update_card_count_div();
            }
        } else {
            var newPart = `<div class="card-name-and-count" id=`;
            newPart += holderName;
            newPart += `>`;
            newPart += `<input id=`;
            newPart += idName + "-Increase";
            newPart += ` type="button" value="+" onclick="incrementCount(this.id);">`
            newPart += `<div id=`;
            newPart += idName + "-Count";
            newPart += ` class="no-break">1</div>`;
            newPart += `<input id=`;
            newPart += idName + "-Decrease";
            newPart += ` type="button" value="-" onclick="decreaseCount(this.id);">`
            newPart += `<div id=`;
            newPart += idName;
            newPart += ` class="no-break minus-spacing" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + `>`;
            newPart += cardName;
            newPart += `</div>`;
            newPart += `</div>`
            document.getElementById(card_type.toLowerCase() + "-cards").innerHTML += newPart;
            cards_in_deck = cards_in_deck + 1;
            update_card_count_div();
        }
    }

    // Ajax add card function
    document.querySelector('#card-submit').onclick = function(e) {
        const messageInputDom = document.querySelector('#card-input');
        const message = messageInputDom.value;
        $.ajax({
            url: '/decks/ajax/',  // The URL of the Django view that handles the request
            type: 'POST',
            data: {
                'warlord_name': name_warlord,
                'ally_faction': $('#ally').val(),
                'card_name': message,
                'flag': 'ADDCARD',
                'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
            },
            success: function(response) {
                $('#responseMessage').text(response.message);  // Update the page dynamically
                const message = response.message;
                if (message === "Warlord") {
                    document.getElementById("signature-squad-cards").innerHTML = `Signature Squad`;
                    document.getElementById("army-cards").innerHTML = `Army Units`;
                    document.getElementById("event-cards").innerHTML = `Events`;
                    document.getElementById("attachment-cards").innerHTML = `Attachments`;
                    document.getElementById("support-cards").innerHTML = `Supports`;
                    name_warlord = response.warlord;
                    route = "/static/images/CardImages/" + name_warlord.split(' ').join('_') + ".jpg";
                    notCheckedAlly();
                    document.getElementById('warlord-card').innerHTML = `<img id=` + name_warlord.split(' ').join('_') + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + route + `>`
                    document.getElementById('synapse-card').innerHTML = `<img id="Cardback" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image">`
                    document.getElementById('pledge-card').innerHTML = `<img id="Cardback_Two" src="/static/images/CardImages/Cardback.jpg" style="opacity:0.0" class="db-image">`
                    signature_squad = response.sig_squad;
                    addSigSquad(signature_squad);
                } else if (message === "ADDCARD") {
                    var card_type = response.card_type;
                    var cardName = response.card_name;
                    if (card_type === "Synapse") {
                        var synapseName = cardName.split(' ').join('_');
                        route = "/static/images/CardImages/" + synapseName + ".jpg";
                        document.getElementById('synapse-card').innerHTML = `<img id=` + synapseName + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" onclick="clearSynapse()" data-src=` + route + `>`
                    } else if (card_type === "Pledge") {
                        var pledgeName = cardName.split(' ').join('_');
                        route = "/static/images/CardImages/" + pledgeName + ".jpg";
                        document.getElementById('pledge-card').innerHTML = `<img id=` + pledgeName + ` src=` + route + ` class="db-image" onmouseenter="showImg(this)" onmouseleave="clearImg()" onclick="clearPledge()" data-src=` + route + `>`
                    } else {
                        addCard(card_type, cardName);
                    }
                }
            }
        });
        messageInputDom.value = '';
    };

    // Ajax search cards function
    $(document).ready(function() {
        $('#myForm').on('submit', function(event) {
            event.preventDefault();
            var faction_selections = getFactionSelections();
            var card_type_selections = getTypeSelections();
            var string_factions = JSON.stringify(faction_selections[0]);
            var string_enabled = JSON.stringify(faction_selections[1]);
            var string_types = JSON.stringify(card_type_selections[0]);
            var string_types_enabled = JSON.stringify(card_type_selections[1]);
            $.ajax({
                url: '/cards/ajax/',  // The URL of the Django view that handles the request
                type: 'POST',
                data: {
                    'search': $('#searchInput').val(),
                    'faction': "None",
                    'card_type': "None",
                    'loyalty': "None",
                    'warlord_name': name_warlord,
                    'ally_faction': $('#ally').val(),
                    'traits': $('#traitsInput').val(),
                    'shields': $('#shieldInput').val(),
                    'min-cost': $('#minCostInput').val(),
                    'max-cost': $('#maxCostInput').val(),
                    'keyword': $('#keywordInput').val(),
                    'min-command': "-1",
                    'max-command': "-1",
                    'min-attack': "-1",
                    'max-attack': "-1",
                    'min-health': "-1",
                    'max-health': "-1",
                    'cycle': "",
                    'war-pack': "",
                    'special_factions': string_factions,
                    'special_enabled': string_enabled,
                    'special_types': string_types,
                    'special_types_enabled': string_types_enabled,
                    'redirect-enabled': "No",
                    'order': $('#order').val(),
                    'asc': $('#asc-desc').val(),
                    'view-as': "Rows Mini",
                    'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
                },
                success: function(response) {
                    // $('#responseMessage').text(response.message);
                    const message = response.message;
                    current_page_number = 0;
                    var cardCount = 0;
                    var pageCount = 0;
                    var card_names = response.cards;
                    var card_types = response.card_types;
                    var loyalties = response.loyalties;
                    var factions = response.factions;
                    var attacks = response.attack;
                    var healths = response.health;
                    var costs = response.cost;
                    var commands = response.command;
                    var shields = response.shield;
                    current_max_rows = parseInt(max_rows);
                    const image_names = response.image_names;
                    e = document.getElementById("card-filter-results");
                    e.innerHTML = ``;
                    var img_src = "";
                    var img_link = "";
                    var new_string = "";
                    var new_id = "";
                    stored_image_links = [[]];
                    stored_image_names = [[]];
                    stored_card_names = [[]];
                    stored_card_types = [[]];
                    stored_card_loyalties = [[]];
                    stored_card_factions = [[]];
                    stored_card_attacks = [[]];
                    stored_card_healths = [[]];
                    stored_card_costs = [[]];
                    stored_card_commands = [[]];
                    stored_card_shields = [[]];
                    num_matches = image_names.length;
                    current_low_match = 1;
                    if (num_matches === 0) {
                        current_low_match = 0;
                    }
                    current_high_match = current_max_rows;
                    if (current_high_match > num_matches) {
                        current_high_match = num_matches;
                    }
                    page_counter = document.getElementById("card-counts-pages");
                    page_counter.innerHTML = `<p>Showing ` + current_low_match + `-` + current_high_match + ` of ` + num_matches + ` matches</p>`;
                    new_string += `
                    <div class="searched-card-headers">
                        <div class="mini-card-name">
                            Card Name
                        </div>
                        <div class="mini-card-type">
                            Card Type
                        </div>
                        <div class="mini-card-cost">
                            Cost
                        </div>
                        <div class="mini-card-attack">
                            ATK
                        </div>
                        <div class="mini-card-health">
                            HP
                        </div>
                        <div class="mini-card-command">
                            CMD
                        </div>
                        <div class="mini-card-shields">
                            SHLD
                        </div>
                    </div>`
                    for (let i = 0; i < image_names.length; i++) {
                        if (cardCount === current_max_rows) {
                            pageCount += 1;
                            cardCount = 0;
                            stored_image_links.push([]);
                            stored_image_names.push([]);
                            stored_card_names.push([]);
                            stored_card_types.push([]);
                            stored_card_loyalties.push([]);
                            stored_card_factions.push([]);
                            stored_card_attacks.push([]);
                            stored_card_healths.push([]);
                            stored_card_costs.push([]);
                            stored_card_commands.push([]);
                            stored_card_shields.push([]);
                        }
                        img_link = "/cards/" + image_names[i] + "/";
                        stored_image_links[pageCount].push(img_link);
                        img_src ="/static/images/CardImages/" + image_names[i] + ".jpg";
                        stored_image_names[pageCount].push(img_src);
                        stored_card_names[pageCount].push(card_names[i]);
                        stored_card_types[pageCount].push(card_types[i]);
                        stored_card_loyalties[pageCount].push(loyalties[i]);
                        stored_card_factions[pageCount].push(factions[i]);
                        stored_card_attacks[pageCount].push(attacks[i]);
                        stored_card_healths[pageCount].push(healths[i]);
                        stored_card_costs[pageCount].push(costs[i]);
                        stored_card_commands[pageCount].push(commands[i]);
                        stored_card_shields[pageCount].push(shields[i]);
                        if (pageCount === 0) {
                            new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + card_names[i].split(' ').join('_') + `>`
                            new_string += `<div class="mini-card-name">` + card_names[i] + `</div>`
                            new_string += `<div class="mini-card-type">` + card_types[i] + `</div>`
                            new_string += `<div class="mini-card-cost">` + costs[i] + `</div>`
                            new_string += `<div class="mini-card-attack">` + attacks[i] + `</div>`
                            new_string += `<div class="mini-card-health">` + healths[i] + `</div>`
                            new_string += `<div class="mini-card-command">` + commands[i] + `</div>`
                            new_string += `<div class="mini-card-shield">` + shields[i] + `</div>`
                            new_string += `</div>`
                        }
                        cardCount += 1;
                    }
                    max_page_number = pageCount;
                    e.innerHTML += new_string;
                }
            });
        });
    });


    // Ajax change ally
    function sendAlly() {
        $.ajax({
            url: '/decks/ajax/',  // The URL of the Django view that handles the request
            type: 'POST',
            data: {
                'warlord_name': name_warlord,
                'ally_faction': $('#ally').val(),
                'flag': 'SETALLY',
                'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
            },
            success: function(response) {
                $('#responseMessage').text(response.message);  // Update the page dynamically
                const message = response.message;
                const ally_result = response.ally_result;
                if (ally_result === "OK") {
                    document.querySelector('#ok-ally').innerHTML = "Ally OK";
                } else {
                    document.querySelector('#ok-ally').innerHTML = "Invalid Ally";
                }
            }
        });
    }
</script>
{% endblock %}
