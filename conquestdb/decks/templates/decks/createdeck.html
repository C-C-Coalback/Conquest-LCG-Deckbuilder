{% extends "base.html" %}
{% block title %}Deck Data{% endblock %}
{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'createdeck.css' %}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<datalist id="card_list">
    <option value="Captain Cato Sicarius"></option>
    <option value="Sicaruis's Chosen"></option>
    <option value="Cato's Stronghold"></option>
    <option value="The Fury of Sicarius"></option>
    <option value="Tallassarian Tempest Blade"></option>
    <option value="10th Company Scout"></option>
    <option value="Tactical Squad Cardinis"></option>
    <option value="Honored Librarian"></option>
    <option value="Blood Angels Veterans"></option>
    <option value="Daring Assault Squad"></option>
    <option value="Land Raider"></option>
    <option value="Ultramarines Dreadnought"></option>
    <option value="Veteran Brother Maxos"></option>
    <option value="Eager Recruit"></option>
    <option value="Iron Hands Techmarine"></option>
    <option value="Raven Guard Speeder"></option>
    <option value="Deathwing Guard"></option>
    <option value="Drop Pod Assault"></option>
    <option value="Indomitable"></option>
    <option value="Exterminatus"></option>
    <option value="Godwyn Pattern Bolter"></option>
    <option value="Iron Halo"></option>
    <option value="Fortress-Monastery"></option>
    <option value="Holy Sepulchre"></option>
    <option value="Nazdreg"></option>
    <option value="Zarathur, High Sorcerer"></option>
    <option value="Nazdreg's Flash Gitz"></option>
    <option value="Bigga Is Betta"></option>
    <option value="Cybork Body"></option>
    <option value="Sniveling Grot"></option>
    <option value="Goff Nob"></option>
    <option value="Weirdboy Maniak"></option>
    <option value="Tankbusta Bommaz"></option>
    <option value="Rugged Killa Kans"></option>
    <option value="Enraged Ork"></option>
    <option value="Crushface"></option>
    <option value="Bad Dok"></option>
    <option value="Rokkitboy"></option>
    <option value="Goff Boyz"></option>
    <option value="Shoota Mob"></option>
    <option value="Burna Boyz"></option>
    <option value="Battle Cry"></option>
    <option value="Snotling Attack"></option>
    <option value="Squig Bombin'"></option>
    <option value="Rokkit Launcha"></option>
    <option value="Ork Kannon"></option>
    <option value="Bigtoof Banna"></option>
    <option value="Tellyporta Pad"></option>
    <option value="Zarathur's Flamers"></option>
    <option value="Shrine of Warpflame"></option>
    <option value="Infernal Gateway"></option>
    <option value="Mark of Chaos"></option>
    <option value="Alpha Legion Infiltrator"></option>
    <option value="Possessed"></option>
    <option value="Splintered Path Acolyte"></option>
    <option value="Khorne Berzerker"></option>
    <option value="Vicious Bloodletter"></option>
    <option value="Umbral Preacher"></option>
    <option value="Black Legion Heldrake"></option>
    <option value="Ravenous Flesh Hounds"></option>
    <option value="Virulent Plague Squad"></option>
    <option value="Chaos Fanatics"></option>
    <option value="Soul Grinder"></option>
    <option value="Xavaes Split-Tongue"></option>
    <option value="Warpstorm"></option>
    <option value="Tzeentch's Firestorm"></option>
    <option value="Promise of Glory"></option>
    <option value="Rune-Encrusted Armor"></option>
    <option value="Dire Mutation"></option>
    <option value="Fortress of Madness"></option>
    <option value="Murder Cogitator"></option>
    <option value="No Mercy"></option>
    <option value="Void Pirate"></option>
    <option value="Rogue Trader"></option>
    <option value="Fall Back!"></option>
    <option value="Promethium Mine"></option>
    <option value="Promotion"></option>
    <option value="Eldorath Starbane"></option>
    <option value="Starbane's Council"></option>
    <option value="Alaitoc Shrine"></option>
    <option value="Foresight"></option>
    <option value="Mobility"></option>
    <option value="Biel-Tan Guardians"></option>
    <option value="Altansar Rangers"></option>
    <option value="Eldar Survivalist"></option>
    <option value="Wildrider Squadron"></option>
    <option value="Soaring Falcon"></option>
    <option value="Wailing Wraithfighter"></option>
    <option value="Iyanden Wraithguard"></option>
    <option value="Shrouded Harlequin"></option>
    <option value="Swordwind Farseer"></option>
    <option value="Silvered Blade Avengers"></option>
    <option value="Biel-Tan Warp Spiders"></option>
    <option value="Spiritseer Erathal"></option>
    <option value="Superiority"></option>
    <option value="Nullify"></option>
    <option value="Doom"></option>
    <option value="Gift of Isha"></option>
    <option value="Banshee Power Sword"></option>
    <option value="Corsair Trading Port"></option>
    <option value="Craftworld Gate"></option>
    <option value="Commander Shadowsun"></option>
    <option value="Shadowsun's Stealth Cadre"></option>
    <option value="Communications Relay"></option>
    <option value="Squadron Redeployment"></option>
    <option value="Command-Link Drone"></option>
    <option value="Recon Drone"></option>
    <option value="Vior'la Marksman"></option>
    <option value="Carnivore Pack"></option>
    <option value="Vash'ya Trailblazer"></option>
    <option value="Fire Warrior Elite"></option>
    <option value="Fire Warrior Strike Team"></option>
    <option value="Crisis Battle Guard"></option>
    <option value="Earth Caste Technician"></option>
    <option value="Gun Drones"></option>
    <option value="Stingwing Swarm"></option>
    <option value="Fireblade Kais'vre"></option>
    <option value="Experimental Devilfish"></option>
    <option value="Even the Odds"></option>
    <option value="Calculated Strike"></option>
    <option value="Deception"></option>
    <option value="Repulsor Impact Field"></option>
    <option value="Ion Rifle"></option>
    <option value="Frontline Launch Bay"></option>
    <option value="Ambush Platform"></option>
    <option value="Colonel Straken"></option>
    <option value="Straken's Command Squad"></option>
    <option value="Omega Zero Command"></option>
    <option value="Glorious Intervention"></option>
    <option value="Straken's Cunning"></option>
    <option value="Ratling Deadeye"></option>
    <option value="Cadian Mortar Squad"></option>
    <option value="Sanctioned Psyker"></option>
    <option value="Leman Russ Battle Tank"></option>
    <option value="Mordian Hellhound"></option>
    <option value="Assault Valkyrie"></option>
    <option value="Stalwart Ogryn"></option>
    <option value="Captain Markis"></option>
    <option value="Enginseer Augur"></option>
    <option value="Penal Legionnaire"></option>
    <option value="Infantry Conscripts"></option>
    <option value="Elysian Assault Team"></option>
    <option value="Preemptive Barrage"></option>
    <option value="Suppressive Fire"></option>
    <option value="Hostile Environment Gear"></option>
    <option value="Bodyguard"></option>
    <option value="Imperial Bunker"></option>
    <option value="Rockcrete Bunker"></option>
    <option value="Catachan Outpost"></option>
    <option value="Packmaster Kith"></option>
    <option value="Kith's Khymeramasters"></option>
    <option value="Khymera Den"></option>
    <option value="Pact of the Haemonculi"></option>
    <option value="Agonizer of Bren"></option>
    <option value="Sybarite Marksman"></option>
    <option value="Incubus Warrior"></option>
    <option value="Haemonculus Tormentor"></option>
    <option value="Hellion Gang"></option>
    <option value="Beasthunter Wyches"></option>
    <option value="Baleful Mandrake"></option>
    <option value="Vile Raider"></option>
    <option value="Black Heart Ravager"></option>
    <option value="Murder of Razorwings"></option>
    <option value="Coliseum Fighters"></option>
    <option value="Kabalite Strike Force"></option>
    <option value="Syren Zythlex"></option>
    <option value="Power from Pain"></option>
    <option value="Archon's Terror"></option>
    <option value="Raid"></option>
    <option value="Suffering"></option>
    <option value="Hypex Injector"></option>
    <option value="Altar of Torment"></option>
    <option value="Twisted Laboratory"></option>
    <option value="Old One Eye"></option>
    <option value="Lurking Hormagaunt"></option>
    <option value="Awakening Cavern"></option>
    <option value="Ferocious Strength"></option>
    <option value="Great Scything Talons"></option>
    <option value="The Swarmlord"></option>
    <option value="Brood Warriors"></option>
    <option value="Leviathan Hive Ship"></option>
    <option value="Indescribable Horror"></option>
    <option value="Bone Sabres"></option>
    <option value="Savage Warrior Prime"></option>
    <option value="Blazing Zoanthrope"></option>
    <option value="Gravid Tervigon"></option>
    <option value="Stalking Lictor"></option>
    <option value="Venomthrope Polluter"></option>
    <option value="Ripper Swarm"></option>
    <option value="Strangler Brood"></option>
    <option value="Termagant Sentry"></option>
    <option value="Hunter Gargoyles"></option>
    <option value="Virulent Spore Sacs"></option>
    <option value="Scything Hormagaunts"></option>
    <option value="Toxic Venomthrope"></option>
    <option value="Termagant Horde"></option>
    <option value="Volatile Pyrovore"></option>
    <option value="Termagant Spikers"></option>
    <option value="Tyranid Warrior"></option>
    <option value="Swarm Guard"></option>
    <option value="Adamant Hive Guard"></option>
    <option value="Ymgarl Genestealer"></option>
    <option value="Ravenous Haruspex"></option>
    <option value="Biovore Spore Launcher"></option>
    <option value="Shrieking Harpy"></option>
    <option value="Burrowing Trygon"></option>
    <option value="Clogged with Corpses"></option>
    <option value="Predation"></option>
    <option value="Spawn Termagants"></option>
    <option value="Spore Burst"></option>
    <option value="Dark Cunning"></option>
    <option value="Consumption"></option>
    <option value="Regeneration"></option>
    <option value="Noxious Fleshborer"></option>
    <option value="Pincer Tail"></option>
    <option value="Parasitic Infection"></option>
    <option value="Heavy Venom Cannon"></option>
    <option value="Brood Chamber"></option>
    <option value="Digestion Pool"></option>
    <option value="Mycetic Spores"></option>
    <option value="Spore Chimney"></option>
    <option value="Synaptic Link"></option>
    <option value="Veteran Barbrus"></option>
    <option value="Vengeance!"></option>
    <option value="Seraphim Superior Allegra"></option>
    <option value="Holy Fusillade"></option>
    <option value="Boss Zugnog"></option>
    <option value="Ork Landa"></option>
    <option value="Roghrax Bloodhand"></option>
    <option value="Ecstatic Seizures"></option>
    <option value="Solarite Avetys"></option>
    <option value="Dark Possession"></option>
    <option value="Autarch Celachia"></option>
    <option value="Subdual"></option>
    <option value="Pathfinder Shi Or'es"></option>
    <option value="Repair Bay"></option>
    <option value="Nahumekh"></option>
    <option value="Destroyer Cultist"></option>
    <option value="Obedience"></option>
    <option value="Hate"></option>
    <option value="The Staff of Command"></option>
    <option value="Anrakyr the Traveller"></option>
    <option value="Pyrrhian Eternals"></option>
    <option value="Slumbering Tomb"></option>
    <option value="Awake the Sleepers"></option>
    <option value="Pyrrhian Warscythe"></option>
    <option value="Canoptek Scarab Swarm"></option>
    <option value="Warriors of Gidrim"></option>
    <option value="Flayed Ones Pack"></option>
    <option value="Immortal Vanguard"></option>
    <option value="Patrolling Wraith"></option>
    <option value="Decaying Warrior Squad"></option>
    <option value="Deathmark Assassins"></option>
    <option value="Mandragoran Immortals"></option>
    <option value="Tomb Blade Squadron"></option>
    <option value="Reanimating Warriors"></option>
    <option value="Canoptek Spyder"></option>
    <option value="Immortal Legion"></option>
    <option value="Praetorian Ancient"></option>
    <option value="Harbinger of Eternity"></option>
    <option value="Lychguard Sentinel"></option>
    <option value="Doom Scythe Invader"></option>
    <option value="Doomsday Ark"></option>
    <option value="Dread Monolith"></option>
    <option value="Reanimation Protocol"></option>
    <option value="Recycle"></option>
    <option value="Mechanical Enhancement"></option>
    <option value="Drudgery"></option>
    <option value="Extermination"></option>
    <option value="Gauss Flayer"></option>
    <option value="Royal Phylactery"></option>
    <option value="Hyperphase Sword"></option>
    <option value="Resurrection Orb"></option>
    <option value="Mind Shackle Scarab"></option>
    <option value="Timeworn Stasis-Crypt"></option>
    <option value="Weight of the Aeons"></option>
    <option value="Eternity Gate"></option>
    <option value="Sautekh Complex"></option>
    <option value="Master Program"></option>
    <option value="Particle Whip"></option>
    <option value="Freebooter Kaptain"></option>
    <option value="Backlash"></option>
    <option value="Defense Battery"></option>
    <option value="STC Fragment"></option>
    <option value="Ravenwing Escort"></option>
    <option value="Standard Bearer"></option>
    <option value="Goff Brawlers"></option>
    <option value="Venomous Fiend"></option>
    <option value="Treacherous Lhamaean"></option>
    <option value="Nightshade Interceptor"></option>
    <option value="Air Caste Courier"></option>
    <option value="Swarmling Termagants"></option>
    <option value="Ragnar Blackmane"></option>
    <option value="Blackmane Sentinel"></option>
    <option value="Frostfang"></option>
    <option value="Ragnar's Warcamp"></option>
    <option value="Blackmane's Hunt"></option>
    <option value="Interrogator Acolyte"></option>
    <option value="Muster the Guard"></option>
    <option value="Noble Deed"></option>
    <option value="Deathskull Lootas"></option>
    <option value="Smash 'n Bash"></option>
    <option value="Death Guard Infantry"></option>
    <option value="Heretek Inventor"></option>
    <option value="Uber Grotesque"></option>
    <option value="Visions of Agony"></option>
    <option value="Archon's Palace"></option>
    <option value="Vaulting Harlequin"></option>
    <option value="Empower"></option>
    <option value="Starcannon"></option>
    <option value="Piranha Hunter"></option>
    <option value="Aun'ui Prelate"></option>
    <option value="Homing Beacon"></option>
    <option value="Ku'gath Plaguefather"></option>
    <option value="Ku'gath's Nurglings"></option>
    <option value="Vile Laboratory"></option>
    <option value="The Plaguefather's Banner"></option>
    <option value="Fetid Haze"></option>
    <option value="Morkai Rune Priest"></option>
    <option value="Fenrisian Wolf"></option>
    <option value="Iron Guard Recruits"></option>
    <option value="Dozer Blade"></option>
    <option value="Inquisitorial Fortress"></option>
    <option value="Attack Squig Herd"></option>
    <option value="Dakka Dakka Dakka!"></option>
    <option value="Kustom Field Generator"></option>
    <option value="Klaivex Warleader"></option>
    <option value="Bladed Lotus Rifle"></option>
    <option value="Soul Seizure"></option>
    <option value="Black Guardians"></option>
    <option value="Death from Above"></option>
    <option value="Dome of Crystal Seers"></option>
    <option value="Bork'an Recruits"></option>
    <option value="Kauyon Strike"></option>
    <option value="Blacksun Filter"></option>
    <option value="Aun'shi"></option>
    <option value="Ethereal Envoy"></option>
    <option value="Aun'shi's Sanctum"></option>
    <option value="Honor Blade"></option>
    <option value="Ethereal Wisdom"></option>
    <option value="White Scars Bikers"></option>
    <option value="Know No Fear"></option>
    <option value="Crushing Blow"></option>
    <option value="Mystic Warden"></option>
    <option value="To Arms!"></option>
    <option value="Honorifica Imperialis"></option>
    <option value="Mekaniak Repair Krew"></option>
    <option value="Goff Big Choppa"></option>
    <option value="Ammo Depot"></option>
    <option value="Rotten Plaguebearers"></option>
    <option value="Nurgling Bomb"></option>
    <option value="Throne of Vainglory"></option>
    <option value="Sslyth Mercenary"></option>
    <option value="Despise"></option>
    <option value="Warlock Destructor"></option>
    <option value="Eldritch Corsair"></option>
    <option value="Foretell"></option>
    <option value="Old Zogwort"></option>
    <option value="Zogwort's Runtherders"></option>
    <option value="Zogwort's Hovel"></option>
    <option value="Wyrdboy Stikk"></option>
    <option value="Launch da Snots"></option>
    <option value="Blood Claw Pack"></option>
    <option value="Rally the Charge"></option>
    <option value="Secluded Apothecarion"></option>
    <option value="Steel Legion Chimera"></option>
    <option value="Tallarn Raiders"></option>
    <option value="Staging Ground"></option>
    <option value="Gleeful Plague Beast"></option>
    <option value="Doombolt"></option>
    <option value="Blight Grenades"></option>
    <option value="Bloodied Reavers"></option>
    <option value="Crucible of Malediction"></option>
    <option value="Searing Brand"></option>
    <option value="Vectored Vyper Squad"></option>
    <option value="Guardian Mesh Armor"></option>
    <option value="Sa'cea XV88 Broadside"></option>
    <option value="Tense Negotiations"></option>
    <option value="Heavy Marker Drone"></option>
    <option value="Torquemada Coteaz"></option>
    <option value="Coteaz's Henchmen"></option>
    <option value="Formosan Black Ship"></option>
    <option value="The Glovodan Eagle"></option>
    <option value="The Emperor Protects"></option>
    <option value="Firedrake Terminators"></option>
    <option value="Imperial Fists Siege Force"></option>
    <option value="Nocturne-Ultima Storm Bolter"></option>
    <option value="Snakebite Thug"></option>
    <option value="Evil Sunz Warbiker"></option>
    <option value="Mork's Great Heap"></option>
    <option value="Noise Marine Zealots"></option>
    <option value="Turbulent Rift"></option>
    <option value="Cacophonic Choir"></option>
    <option value="Kabalite Halfborn"></option>
    <option value="Slake the Thirst"></option>
    <option value="Shadow Field"></option>
    <option value="Mighty Wraithknight"></option>
    <option value="Seer's Exodus"></option>
    <option value="Slumbering Gardens"></option>
    <option value="Fire Warrior Grenadiers"></option>
    <option value="Ksi'm'yen Orbital City"></option>
    <option value="Baharroth"></option>
    <option value="Baharroth's Hawks"></option>
    <option value="Banner of the Ashen Sky"></option>
    <option value="The Shining Blade"></option>
    <option value="Cry of the Wind"></option>
    <option value="Urien Rakarth"></option>
    <option value="Twisted Wracks"></option>
    <option value="Rakarth's Experimentations"></option>
    <option value="Ichor Gauntlet"></option>
    <option value="Urien's Oubliette"></option>
    <option value="Space Wolves Predator"></option>
    <option value="Primal Howl"></option>
    <option value="Hallow Librarium"></option>
    <option value="Big Shoota Battlewagon"></option>
    <option value="Made Ta Fight"></option>
    <option value="Squiggify"></option>
    <option value="Ancient Keeper of Secrets"></option>
    <option value="Slaanesh's Temptation"></option>
    <option value="Doom Siren"></option>
    <option value="Shrieking Basilisk"></option>
    <option value="The Emperor's Warrant"></option>
    <option value="Vior'la Warrior Cadre"></option>
    <option value="For the Tau'va"></option>
    <option value="Inquisitor Caius Wroth"></option>
    <option value="Broderick Worr"></option>
    <option value="Anxious Infantry Platoon"></option>
    <option value="Forward Barracks"></option>
    <option value="Summary Execution"></option>
    <option value="Commissarial Bolt Pistol"></option>
    <option value="Commander Starblaze"></option>
    <option value="Ardent Auxiliaries"></option>
    <option value="Starblaze's Outpost"></option>
    <option value="Bond of Brotherhood"></option>
    <option value="Searing Burst Cannon"></option>
    <option value="Lone Wolf"></option>
    <option value="Righteous Initiate"></option>
    <option value="Accept Any Challenge"></option>
    <option value="Rickety Warbuggy"></option>
    <option value="Lucky Warpaint"></option>
    <option value="Ravening Psychopath"></option>
    <option value="Sowing Chaos"></option>
    <option value="Stalking Ur-Ghul"></option>
    <option value="Holding Cell"></option>
    <option value="Prophetic Farseer"></option>
    <option value="Wraithguard Revenant"></option>
    <option value="Deathly Web Shrine"></option>
    <option value="Striking Ravener"></option>
    <option value="Acid Maw"></option>
    <option value="Ba'ar Zul the Hate-Bound"></option>
    <option value="Ba'ar Zul's Cleavers"></option>
    <option value="Kaerux Erameas"></option>
    <option value="Blood For The Blood God!"></option>
    <option value="The Butcher's Nails"></option>
    <option value="Archon Salaine Morn"></option>
    <option value="Shadowed Thorns Pillagers"></option>
    <option value="The Nexus of Shadows"></option>
    <option value="Inevitable Betrayal"></option>
    <option value="Last Breath"></option>
    <option value="Neophyte Apprentice"></option>
    <option value="The Black Sword"></option>
    <option value="Sacaellum Shrine Guard"></option>
    <option value="Troop Transport"></option>
    <option value="Front Line 'Ard Boyz"></option>
    <option value="Ramshackle Trukk"></option>
    <option value="Rok Bombardment"></option>
    <option value="Dire Avenger Exarch"></option>
    <option value="Mind War"></option>
    <option value="Prudent Fire Warriors"></option>
    <option value="Exploratory Drone"></option>
    <option value="Auxiliary Armor"></option>
    <option value="Soaring Gargoyles"></option>
    <option value="Sacaellum Infestors"></option>
    <option value="Gorzod"></option>
    <option value="Gorzod's Wagons"></option>
    <option value="Kustomisation Station"></option>
    <option value="Hostile Acquisition"></option>
    <option value="The Bloodrunna"></option>
    <option value="Imperial Fists Devastators"></option>
    <option value="Teleportarium"></option>
    <option value="Death Korps Engineers"></option>
    <option value="Vanguard Soldiers"></option>
    <option value="Inspirational Fervor"></option>
    <option value="Prodigal Sons Disciple"></option>
    <option value="Seer of Deceit"></option>
    <option value="Khornate Chain Axe"></option>
    <option value="Mandrake Fearmonger"></option>
    <option value="Shadowed Thorns Bodysuit"></option>
    <option value="Fire Prism"></option>
    <option value="Saim-Hann Jetbike"></option>
    <option value="Prototype Crisis Suit"></option>
    <option value="Mont'ka Strike"></option>
    <option value="Sae'lum Enclave"></option>
    <option value="Genestealer Prowler"></option>
    <option value="Biomass Sacrifice"></option>
    <option value="Subject Omega-X62113"></option>
    <option value="Invasive Genestealers"></option>
    <option value="Ruined Passages"></option>
    <option value="Gene Implantation"></option>
    <option value="Lethal Toxin Sacs"></option>
    <option value="Sword Brethren Dreadnought"></option>
    <option value="Declare the Crusade"></option>
    <option value="Cenobyte Servitor"></option>
    <option value="Taurox APC"></option>
    <option value="M35 Galaxy Lasgun"></option>
    <option value="Skrap Nabba"></option>
    <option value="Outflank'em"></option>
    <option value="Smasha Gun Battery"></option>
    <option value="Master Warpsmith"></option>
    <option value="Corrupted Teleportarium"></option>
    <option value="Dying Sun Marauder"></option>
    <option value="Kabalite Harriers"></option>
    <option value="Gut and Pillage"></option>
    <option value="Wildrider Vyper"></option>
    <option value="Bonesinger Choir"></option>
    <option value="Auxiliary Overseer"></option>
    <option value="Drone Defense System"></option>
    <option value="Chaplain Mavros"></option>
    <option value="Reclusiam Templars"></option>
    <option value="The Emperor's Champion"></option>
    <option value="Faith and Hatred"></option>
    <option value="Vow of Honor"></option>
    <option value="Ancient Crozius Arcanum"></option>
    <option value="Sacaellum's Finest"></option>
    <option value="Cathedral of Saint Camila"></option>
    <option value="Salvaged Battlewagon"></option>
    <option value="Huge Chain-Choppa"></option>
    <option value="Berzerker Warriors"></option>
    <option value="Killing Field"></option>
    <option value="Staff of Change"></option>
    <option value="Shadowed Thorns Venom"></option>
    <option value="Rapid Assault"></option>
    <option value="Saim-Hann Kinsman"></option>
    <option value="Eldritch Storm"></option>
    <option value="Shuriken Catapult"></option>
    <option value="Sae'lum Pioneer"></option>
    <option value="Colony Shield Generator"></option>
    <option value="Devourer Venomthrope"></option>
    <option value="Genestealer Brood"></option>
    <option value="Sudden Adaptation"></option>
    <option value="Talyesin Fharenal"></option>
    <option value="Talyesin's Spiders"></option>
    <option value="Talyesin's Warlocks"></option>
    <option value="Wisdom of the Serpent"></option>
    <option value="Path of the Leader"></option>
    <option value="Autarch Powersword"></option>
    <option value="Reliquary Techmarine"></option>
    <option value="Crypt of Saint Camila"></option>
    <option value="Leman Russ Conqueror"></option>
    <option value="Bolster the Defense"></option>
    <option value="Imperial Rally Point"></option>
    <option value="Corpulent Ork"></option>
    <option value="Painboy Tent"></option>
    <option value="Frenzied Bloodthirster"></option>
    <option value="Warp Rift"></option>
    <option value="Flayed Skull Slaver"></option>
    <option value="Raiding Portal"></option>
    <option value="Hallucinogen Grenade"></option>
    <option value="Kroot Hunter"></option>
    <option value="War of Ideas"></option>
    <option value="Genestealer Harvesters"></option>
    <option value="Nesting Chamber"></option>
    <option value="Ymgarl Factor"></option>
    <option value="8th Company Assault Squad"></option>
    <option value="Valkyris Pattern Jump Pack"></option>
    <option value="Vostroyan Officer"></option>
    <option value="Scion Strike Force"></option>
    <option value="No Surprises"></option>
    <option value="Blitza-Bommer"></option>
    <option value="Kommando Sneakaz"></option>
    <option value="Sathariel the Invokator"></option>
    <option value="The Prince's Might"></option>
    <option value="Supplicant of Pain"></option>
    <option value="Hunting Grounds"></option>
    <option value="Seer Adept"></option>
    <option value="Furious Wraithblade"></option>
    <option value="Hidden Strike Chainsword"></option>
    <option value="Kroot Guerrilla"></option>
    <option value="XV8-05 Enforcer"></option>
    <option value="Keening Maleceptor"></option>
    <option value="Crush of Sky-Slashers"></option>
    <option value="Immortal Loyalist"></option>
    <option value="Shroud Cruiser"></option>
    <option value="Epistolary Vezuel"></option>
    <option value="Vezuel's Hunters"></option>
    <option value="Dark Angels Cruiser"></option>
    <option value="Unseen Strike"></option>
    <option value="Fulgaris"></option>
    <option value="Firstborn Battalion"></option>
    <option value="Clearcut Refuge"></option>
    <option value="Gorgul Da Slaya"></option>
    <option value="Great Iron Gob"></option>
    <option value="Infectious Nurgling"></option>
    <option value="Seekers of Slaanesh"></option>
    <option value="Mark of Slaanesh"></option>
    <option value="Mandrake Cutthroat"></option>
    <option value="A Thousand Cuts"></option>
    <option value="Adherent Outcast"></option>
    <option value="Concealing Darkness"></option>
    <option value="Grav Inhibitor Drone"></option>
    <option value="Missile Pod"></option>
    <option value="Caustic Tyrannofex"></option>
    <option value="Loamy Broodhive"></option>
    <option value="Hunting Acanthrites"></option>
    <option value="Defensive Protocols"></option>
    <option value="Grigory Maksim"></option>
    <option value="Maksim's Squadron"></option>
    <option value="Clearing the Path"></option>
    <option value="Keep Firing!"></option>
    <option value="Searchlight"></option>
    <option value="Salamander Flamer Squad"></option>
    <option value="Techmarine Aspirant"></option>
    <option value="Deathstorm Drop Pod"></option>
    <option value="Squiggoth Brute"></option>
    <option value="Brutal Cunning"></option>
    <option value="Disciple of Excess"></option>
    <option value="Blood Rain Tempest"></option>
    <option value="Corrupted Clawed Fiend"></option>
    <option value="Electrocorrosive Whip"></option>
    <option value="War Walker Squadron"></option>
    <option value="Phoenix Attack Fighter"></option>
    <option value="Webway Passage"></option>
    <option value="Sniper Drone Team"></option>
    <option value="Tactical Withdrawal"></option>
    <option value="Focal Warrior"></option>
    <option value="Flesh Hooks"></option>
    <option value="Rumbling Tomb Stalker"></option>
    <option value="Illuminor Szeras"></option>
    <option value="Augmented Warriors"></option>
    <option value="Dissection Chamber"></option>
    <option value="Vivisection"></option>
    <option value="Eldritch Lance"></option>
    <option value="Deathwing Terminators"></option>
    <option value="Repent!"></option>
    <option value="Enginseer Mechanic"></option>
    <option value="Griffon Escort"></option>
    <option value="Hot-Shot Laspistol"></option>
    <option value="Blood Axe Strategist"></option>
    <option value="'idden Base"></option>
    <option value="Noise Marines Warband"></option>
    <option value="Ominous Wind"></option>
    <option value="Masked Hunter"></option>
    <option value="Run Down"></option>
    <option value="Shrieking Exarch"></option>
    <option value="Ulthwe Spirit Stone"></option>
    <option value="Herald of the Tau'va"></option>
    <option value="Beleaguered Garrison"></option>
    <option value="Mucolid Spores"></option>
    <option value="Burst Forth"></option>
    <option value="Jain Zar"></option>
    <option value="Banshee Assault Squad"></option>
    <option value="Intercept"></option>
    <option value="Storm of Silence"></option>
    <option value="The Mask of Jain Zar"></option>
    <option value="Dark Angels Vindicator"></option>
    <option value="Imperial Power Fist"></option>
    <option value="Catachan Tracker"></option>
    <option value="Death Serves the Emperor"></option>
    <option value="Sootblade Assashun"></option>
    <option value="Repulsor Minefield"></option>
    <option value="Sickening Helbrute"></option>
    <option value="Purveyor of Hubris"></option>
    <option value="Cloud of Flies"></option>
    <option value="Kabalite Blackguard"></option>
    <option value="Abomination Workshop"></option>
    <option value="XV25 Stealth Squad"></option>
    <option value="Kroot Hunting Rifle"></option>
    <option value="Lictor Vine Lurker"></option>
    <option value="Invasion Site"></option>
    <option value="Risen Warriors"></option>
    <option value="Quantum Shielding"></option>
    <option value="Vha'shaelhur"></option>
    <option value="Alluring Daemonette"></option>
    <option value="Tower of Worship"></option>
    <option value="Daemonic Incursion"></option>
    <option value="Predatory Instinct"></option>
    <option value="Iron Hands Centurion"></option>
    <option value="Land Speeder Vengeance"></option>
    <option value="Standard of Devastation"></option>
    <option value="Mars Alpha Exterminator"></option>
    <option value="Jungle Trench"></option>
    <option value="Follower of Gork"></option>
    <option value="Fungal Turf"></option>
    <option value="Beastmaster Harvester"></option>
    <option value="Hydrae Stalker"></option>
    <option value="Scorpion Striker"></option>
    <option value="Piercing Wail"></option>
    <option value="Raging Krootox"></option>
    <option value="Hunter's Ploy"></option>
    <option value="Slavering Mawloc"></option>
    <option value="Armored Shell"></option>
    <option value="Dread Command Barge"></option>
    <option value="Shard of the Deceiver"></option>
    <option value="Parasite of Mortrex"></option>
    <option value="Savage Parasite"></option>
    <option value="Swarming Rippers"></option>
    <option value="Sweep Attack"></option>
    <option value="Prey on the Weak"></option>
    <option value="Praetorian Shadow"></option>
    <option value="Aberrant Alpha"></option>
    <option value="Vanguarding Horror"></option>
    <option value="Ardaci-strain Broodlord"></option>
    <option value="Trazyn the Infinite"></option>
    <option value="Acquisition Phalanx"></option>
    <option value="Surrogate Host"></option>
    <option value="Third Eye of Trazyn"></option>
    <option value="Reign of Solemnace"></option>
    <option value="Replicating Scarabs"></option>
    <option value="Parasitic Scarabs"></option>
    <option value="Triarch Stalkers Procession"></option>
    <option value="Traumatophobia"></option>
    <option value="Seething Mycetic Spore"></option>
    <option value="Spreading Genestealer Brood"></option>
    <option value="Icy Trygon"></option>
    <option value="Emergent Cultists"></option>
    <option value="Growing Tide"></option>
    <option value="Rain of Mycetic Spores"></option>
    <option value="Adaptative Thorax Swarm"></option>
    <option value="Contaminated Convoys"></option>
    <option value="Overrun"></option>
    <option value="Rapid Evolution"></option>
    <option value="Drifting Spore Mines"></option>
    <option value="Goliath Rockgrinder"></option>
    <option value="Calamity"></option>
    <option value="Magus Harid"></option>
    <option value="Imperial Bastion"></option>
    <option value="Genestealer Hybrids"></option>
    <option value="Banner of the Cult"></option>
    <option value="Accelerated Gestation"></option>
    <option value="Hive Ship Tendrils"></option>
    <option value="Vale Tenndrac"></option>
    <option value="Tunneling Mawloc"></option>
    <option value="Shedding Hive Crone"></option>
    <option value="Erupting Aberrants"></option>
    <option value="Strangleweb Termagant"></option>
    <option value="Planet Absorption"></option>
    <option value="Reinforced Synaptic Network"></option>
    <option value="Pulsating Carapace"></option>
    <option value="Tomb Blade Diversionist"></option>
    <option value="Flayed Ones Revenants"></option>
    <option value="Ghost Ark of Orikan"></option>
    <option value="Necrodermis"></option>
    <option value="Optimized Protocol"></option>
    <option value="Dynastic Weaponry"></option>
    <option value="Endless Legions"></option>
    <option value="World Engine Beam"></option>
    <option value="Raving Cryptek"></option>
    <option value="Etekh the Awakener"></option>
    <option value="Hollow Sun"></option>
    <option value="Eldritch Reaping"></option>
    <option value="Crown of Control"></option>
    <option value="Convoking Praetorians"></option>
    <option value="Imotekh the Stormlord"></option>
    <option value="Sautekh Royal Crypt"></option>
    <option value="Supreme Strategist"></option>
    <option value="The Strength of the Enemy"></option>
    <option value="Court of the Stormlord"></option>
    <option value="Avenging Squad"></option>
    <option value="Command Predator"></option>
    <option value="Deathwing Interceders"></option>
    <option value="Dodging Land Speeder"></option>
    <option value="Dutiful Castellan"></option>
    <option value="Fierce Purgator"></option>
    <option value="Fighting Company Daras"></option>
    <option value="First Line Rhinos"></option>
    <option value="Frenzied Wulfen"></option>
    <option value="Grand Master Belial"></option>
    <option value="Hjorvath Coldstorm"></option>
    <option value="Inspiring Sergeant"></option>
    <option value="Interceptor Squad"></option>
    <option value="Knight Paladin Voris"></option>
    <option value="Pinning Razorback"></option>
    <option value="Prognosticator"></option>
    <option value="Sanctified Aggressor"></option>
    <option value="Steadfast Sword Brethren"></option>
    <option value="Storming Librarian"></option>
    <option value="Thunderwolf Cavalry"></option>
    <option value="Wrathful Dreadnought"></option>
    <option value="Call the Storm"></option>
    <option value="Centurion Warsuit"></option>
    <option value="Terminator Armour"></option>
    <option value="Trapped Objective"></option>
    <option value="Woken Machine Spirit"></option>
    <option value="Aerial Deployment"></option>
    <option value="The Emperor's Retribution"></option>
    <option value="Uphold His Honor"></option>
    <option value="Anvil Strike Force"></option>
    <option value="Gladius Strike Force"></option>
    <option value="Talon Strike Force"></option>
    <option value="Mobilize the Chapter"></option>
    <option value="The Wolf Within"></option>
    <option value="Vamii Industrial Complex"></option>
    <option value="Castellan Crowe"></option>
    <option value="Brotherhood Justicar"></option>
    <option value="Humanity's Shield"></option>
    <option value="Psychic Ward"></option>
    <option value="The Blade of Antwyr"></option>
    <option value="Chapter Champion Varn"></option>
    <option value="3rd Company Tactical Squad"></option>
    <option value="Citadel of Vamii"></option>
    <option value="Fortress of Mangeras"></option>
    <option value="Memories of Fallen Comrades"></option>
    <option value="The Siege Masters"></option>
    <option value="Mephiston"></option>
    <option value="Sanguinary Guard"></option>
    <option value="The Black Rage"></option>
    <option value="The Bloodied Host"></option>
    <option value="Vitarus, the Sanguine Sword"></option>
    <option value="23rd Mechanised Battalion"></option>
    <option value="Armored Fist Squad"></option>
    <option value="Catachan Devils Patrol"></option>
    <option value="Celestian Amelia"></option>
    <option value="Commissar Somiel"></option>
    <option value="Devoted Hospitaller"></option>
    <option value="Dominion Eugenia"></option>
    <option value="Eloquent Confessor"></option>
    <option value="Evangelizing Ships"></option>
    <option value="Exalted Celestians"></option>
    <option value="Fanatical Sister Repentia"></option>
    <option value="Heavy Flamer Retributor"></option>
    <option value="Holy Battery"></option>
    <option value="Hydra Flak Tank"></option>
    <option value="Krieg Armoured Regiment"></option>
    <option value="Patron Saint"></option>
    <option value="Pattern IX Immolator"></option>
    <option value="Penitent Engine"></option>
    <option value="Sacred Rose Immolator"></option>
    <option value="Saint Erika"></option>
    <option value="Siege Regiment Manticore"></option>
    <option value="Tenacious Novice Squad"></option>
    <option value="Undying Saint"></option>
    <option value="Vengeful Seraphim"></option>
    <option value="Zealous Cantus"></option>
    <option value="Banner of the Sacred Rose"></option>
    <option value="Blade of the Crimson Oath"></option>
    <option value="Departmento Munitorum Aid"></option>
    <option value="Revered Heavy Flamer"></option>
    <option value="Sanctified Bolter"></option>
    <option value="Seal of the Ebon Chalice"></option>
    <option value="Until Justice is Done"></option>
    <option value="Our Last Stand"></option>
    <option value="Wrathful Retribution"></option>
    <option value="Holy Crusade"></option>
    <option value="Munitorum Support"></option>
    <option value="Senatorum Directives"></option>
    <option value="Agra's Preachings"></option>
    <option value="Blood of Martyrs"></option>
    <option value="Cardinal Agra Decree"></option>
    <option value="Convent Prioris Advisor"></option>
    <option value="Embarked Squads"></option>
    <option value="Holy Chapel"></option>
    <option value="Canoness Vardina"></option>
    <option value="Faith Denies Death"></option>
    <option value="Sororitas Command Squad"></option>
    <option value="Supreme Appearance"></option>
    <option value="Transcendent Blessing"></option>
    <option value="Saint Celestine"></option>
    <option value="Armour of Saint Katherine"></option>
    <option value="Heralding Cherubim"></option>
    <option value="Miraculous Intervention"></option>
    <option value="Order of the Crimson Oath"></option>
</datalist>
<div id="deck-container">
    <div class="auto-deck-build">
        <div id="warlord-card" class="poster-card"><img id="Nazdreg" src="/static/images/CardImages/Cardback.jpg" class="db-image"></div>
        <div id="synapse-card" class="poster-card"><img id="Cardback" src="/static/images/CardImages/Cardback.jpg" class="db-image"></div>
        <div id="details">Details<br>
            <label for="name-deck">Name:</label>
            <input id="name-deck" type="search" size="28"><br>
            <label for="ally">Ally:</label>
            <select name="ally" id="ally" onChange="notCheckedAlly();">
                <option value=""></option>
                <option value="Space Marines">Space Marines</option>
                <option value="Tau">Tau</option>
                <option value="Eldar">Eldar</option>
                <option value="Dark Eldar">Dark Eldar</option>
                <option value="Chaos">Chaos</option>
                <option value="Orks">Orks</option>
                <option value="Astra Militarum">Astra Militarum</option>
            </select>
            <p id="ok-ally">Ally OK</p>
        </div>
        <div id="signature-squad-cards" class="db-section">Signature Squad

        </div>
        <div id="army-cards" class="db-section">Army Units</div>
        <div id="event-cards" class="db-section">Events</div>
        <div id="attachment-cards" class="db-section">Attachments</div>
        <div id="support-cards" class="db-section">Supports</div>
    </div>
    <div id="manual-deck-import">
    <textarea id="chat-log" cols="100" rows="10"></textarea><br>
    </div>
    <input id="card-input" type="search" list="card_list" size="60"><br>
    <input id="card-submit" type="button" value="Add Card">
    <input id="deck-submit-1" type="button" value="Send Deck" onclick="sendDeckAuto();">
    <input id="username" name="username" value="{{ user.username }}" style="display:none;">
    <div id="responseMessage">
        <p></p>
    </div>
</div>
<div id="description-container">
    <h2>Add a description for your deck here</h2>
    <textarea id="descriptionInput" name="description" rows="20" cols="80"></textarea><br>
</div>
<div id="mini-card-search-container">
    <h2>Available Cards</h2>
    <form id="myForm">
        <div id="filters-container">
            <p id="p-card-name">Card Name:</p><input id="searchInput" type="text" name="search">
            <p id="p-card-type">Card Type:</p><select name="card-type" id="cardType">
                <option value="None"></option>
                <option value="Army">Army</option>
                <option value="Support">Support</option>
                <option value="Event">Event</option>
                <option value="Attachment">Attachment</option>
                <option value="Warlord">Warlord</option>
                <option value="Synapse">Synapse</option>
            </select>
                <p id="p-faction">Faction:</p><select name="faction" id="faction">
                <option value="None"></option>
                <option value="Space Marines">Space Marines</option>
                <option value="Tau">Tau</option>
                <option value="Eldar">Eldar</option>
                <option value="Dark Eldar">Dark Eldar</option>
                <option value="Chaos">Chaos</option>
                <option value="Orks">Orks</option>
                <option value="Astra Militarum">Astra Militarum</option>
                <option value="Neutral">Neutral</option>
                <option value="Tyranids">Tyranids</option>
                <option value="Necrons">Necrons</option>
            </select>
                <p id="p-loyalty">Loyalty:</p><select name="loyalty" id="loyalty">
                <option value="None"></option>
                <option value="Common">Common</option>
                <option value="Loyal">Loyal</option>
                <option value="Signature">Signature</option>
             </select>
        </div>
        <button id="send-filter">Perform Search</button>
    </form>
    <input id="prev-page" type="button" value="previous" onclick="previousPage();">
    <div id="card-filter-results">
        <div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src="/static/images/CardImages/Captain_Cato_Sicarius.jpg" data-name="Captain Cato Sicarius">
            <div class="mini-card-name">Captain Cato Sicarius</div>
            <div class="mini-card-type">Warlord</div>
            <div class="mini-card-loyalty">Signature</div>
            <div class="mini-card-faction">Space Marines</div>
        </div>
        <div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src="/static/images/CardImages/10th_Company_Scout.jpg" data-name="10th Company Scout">
            <div class="mini-card-name">10th Company Scout</div>
            <div class="mini-card-type">Army</div>
            <div class="mini-card-loyalty">Common</div>
            <div class="mini-card-faction">Space Marines</div>
        </div>
        <div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src="/static/images/CardImages/Bigtoof_Banna.jpg" data-name="Bigtoof Banna">
            <div class="mini-card-name">Bigtoof Banna</div>
            <div class="mini-card-type">Support</div>
            <div class="mini-card-loyalty">Common</div>
            <div class="mini-card-faction">Orks</div>
        </div>
    </div>
    <input id="next-page" type="button" value="next" onclick="nextPage();">
</div>
<img id="cursor-follower" src="/static/images/CardImages/Cardback.jpg">
<script>

    var current_page_number = 0;
    var max_page_number = 0;
    var stored_image_links = [];
    var stored_image_names = [];
    var stored_card_names = [];
    var stored_card_types = [];
    var stored_card_loyalties = [];
    var stored_card_factions = [];

    var mouse_x = 0;
    var mouse_y = 0;
    onmousemove = function(e){
        mouse_x = e.clientX;
        mouse_y = e.clientY;
    }

    function previousPage() {
        if (current_page_number !== 0) {
            current_page_number = current_page_number - 1;
            e = document.getElementById("card-filter-results");
            e.innerHTML = ``;
            var img_src = "";
            var new_string = "";
            var new_id = "";
            var new_card_name = "";
            var new_card_type = "";
            var new_loyalty = "";
            var new_faction = "";
            for (let i = 0; i < stored_image_links[current_page_number].length; i++) {
                img_src = stored_image_names[current_page_number][i];
                new_card_name = stored_card_names[current_page_number][i];
                new_card_type = stored_card_types[current_page_number][i];
                new_loyalty = stored_card_loyalties[current_page_number][i];
                new_faction = stored_card_factions[current_page_number][i];
                new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + new_card_name.split(' ').join('_') + `>`
                new_string += `<div class="mini-card-name">` + new_card_name + `</div>`
                new_string += `<div class="mini-card-type">` + new_card_type + `</div>`
                new_string += `<div class="mini-card-loyalty">` + new_loyalty + `</div>`
                new_string += `<div class="mini-card-faction">` + new_faction + `</div>`
                new_string += `</div>`;
            }
            e.innerHTML += new_string;
        }
    }

    function nextPage() {
        if (current_page_number !== max_page_number) {
            current_page_number = current_page_number + 1;
            e = document.getElementById("card-filter-results");
            e.innerHTML = ``;
            var img_src = "";
            var new_string = "";
            var new_id = "";
            var new_card_name = "";
            var new_card_type = "";
            var new_loyalty = "";
            var new_faction = "";
            for (let i = 0; i < stored_image_links[current_page_number].length; i++) {
                console.log(current_page_number);
                console.log(stored_card_names);
                img_src = stored_image_names[current_page_number][i];
                new_card_name = stored_card_names[current_page_number][i];
                new_card_type = stored_card_types[current_page_number][i];
                new_loyalty = stored_card_loyalties[current_page_number][i];
                new_faction = stored_card_factions[current_page_number][i];
                new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + new_card_name.split(' ').join('_') + `>`
                new_string += `<div class="mini-card-name">` + new_card_name + `</div>`
                new_string += `<div class="mini-card-type">` + new_card_type + `</div>`
                new_string += `<div class="mini-card-loyalty">` + new_loyalty + `</div>`
                new_string += `<div class="mini-card-faction">` + new_faction + `</div>`
                new_string += `</div>`;
            }
            e.innerHTML += new_string;
        }
    }

    function showImg(el) {
        var new_src = el.getAttribute('data-src');
        cursor_img = document.getElementById("cursor-follower");
        cursor_img.style.left = mouse_x + 30 + "px";
        cursor_img.style.top = mouse_y - 300 + "px";
        cursor_img.src = new_src;
        cursor_img.style.display = "block";
    }
    function clearImg() {
        cursor_img = document.getElementById("cursor-follower");
        cursor_img.src = "/static/images/CardImages/Cardback.jpg";
        cursor_img.style.display = "none";
    }

    var data = "{{ data }}";
    var name_warlord = "";
    var force_send = "F";
    if (data !== "") {
        force_send = "T";
        data = data.replace("&#x27;", "'");
        var deck_data = data.split("|||");
        deck_data = deck_data.filter(function(a){return a !== "----------------------------------------------------------------------"});
        deck_data = deck_data.filter(function(a){return a !== "Planet"});
        deck_data = deck_data.filter(function(a){return a !== ""});
        console.log(deck_data);
        const name = deck_data[0];
        name_warlord = deck_data[1];
        var factions = deck_data[2];
        var split_factions = factions.split(" (");
        if (split_factions.length === 2) {
            const ally = split_factions[1].replace(")", "");
            console.log(ally);
            document.getElementById('ally').value = ally;
        }
        route = "/static/images/CardImages/" + name_warlord.split(' ').join('_') + ".jpg";
        document.getElementById('warlord-card').innerHTML = `<img id=` + name_warlord.split(' ').join('_') + ` src=` + route + ` class="db-image">`;
        document.getElementById('name-deck').value = name;
        var sig_pos = -1;
        var army_pos = -1;
        var support_pos = -1;
        var synapse_pos = -1;
        var attachment_pos = -1;
        var event_pos = -1;
        for (let i = 0; i < deck_data.length; i++) {
            if (deck_data[i] === "Signature Squad") {
                sig_pos = i;
            }
            if (deck_data[i] === "Army") {
                army_pos = i;
            }
            if (deck_data[i] === "Support") {
                support_pos = i;
            }
            if (deck_data[i] === "Synapse") {
                synapse_pos = i;
            }
            if (deck_data[i] === "Attachment") {
                attachment_pos = i;
            }
            if (deck_data[i] === "Event") {
                event_pos = i;
            }
        }
        var sig_cards = deck_data.slice(sig_pos+1, army_pos);
        var army_cards = deck_data.slice(army_pos+1, support_pos);
        var support_cards = deck_data.slice(support_pos+1, synapse_pos);
        var synapse_cards = deck_data.slice(synapse_pos+1, attachment_pos);
        var attachment_cards = deck_data.slice(attachment_pos+1, event_pos);
        var event_cards = deck_data.slice(event_pos+1, deck_data.length);
        // console.log(sig_cards);
        // console.log(army_cards);
        // console.log(support_cards);
        // console.log(synapse_cards);
        // console.log(attachment_cards);
        // console.log(event_cards);
        addSigSquad(sig_cards);
        for (let i = 0; i < army_cards.length; i++) {
            var card_name = army_cards[i].slice(3);
            var card_amount = parseInt(army_cards[i].charAt(0));
            console.log(card_name);
            for (let j = 0; j < card_amount; j++) {
                addCard("Army", card_name);
            }
        }
        for (let i = 0; i < support_cards.length; i++) {
            var card_name = support_cards[i].slice(3);
            var card_amount = parseInt(support_cards[i].charAt(0));
            console.log(card_name);
            for (let j = 0; j < card_amount; j++) {
                addCard("Support", card_name);
            }
        }
        for (let i = 0; i < attachment_cards.length; i++) {
            var card_name = attachment_cards[i].slice(3);
            var card_amount = parseInt(attachment_cards[i].charAt(0));
            console.log(card_name);
            for (let j = 0; j < card_amount; j++) {
                addCard("Attachment", card_name);
            }
        }
        for (let i = 0; i < event_cards.length; i++) {
            var card_name = event_cards[i].slice(3);
            var card_amount = parseInt(event_cards[i].charAt(0));
            console.log(card_name);
            for (let j = 0; j < card_amount; j++) {
                addCard("Event", card_name);
            }
        }
        if (synapse_cards.length === 1) {
            var synapseName = synapse_cards[0].slice(3).split(' ').join('_');
            route = "/static/images/CardImages/" + synapseName + ".jpg";
            document.getElementById('synapse-card').innerHTML = `<img id=` + synapseName + ` src=` + route + ` class="db-image">`
        }
    }

    document.querySelector('#card-input').focus();
    document.querySelector('#card-input').onkeyup = function(e) {
        if (e.key === 'Enter') {  // enter, return
            document.querySelector('#card-submit').click();
        }
    };

    function quickAddCard(el) {
        const cardName = el.getAttribute('data-name').split('_').join(' ');
        document.querySelector('#card-input').value = cardName;
        document.querySelector('#card-submit').click();
    }
    function decreaseCount(id) {
        var idName = id.slice(0,-9)
        var countName = idName + "-Count";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "1") {
                str = decrementString(str);
                e.innerHTML = str;
            } else {
                var holderName = idName + "-Holder";
                var x = document.getElementById(holderName);
                x.remove();
            }
        }
    }

    function selectElement(id, valueToSelect) {
        let element = document.getElementById(id);
        element.value = valueToSelect;
    }

    function incrementCount(id) {
        var idName = id.slice(0,-9)
        var countName = idName + "-Count";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "3") {
                str = incrementString(str);
                e.innerHTML = str;
            }
        }
    }

    function setInitialDeck() {
        document.querySelector('#chat-log').value = ""
        document.querySelector('#chat-log').value += '\n----------------------------------------------------------------------\n\n\n----------------------------------------------------------------------\n';
        document.querySelector('#chat-log').value += 'Signature Squad\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Army\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Support\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Synapse\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Attachment\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Event\n\n----------------------------------------------------------------------\n'
        document.querySelector('#chat-log').value += 'Planet\n\n----------------------------------------------------------------------\n'
    }

    setInitialDeck();

    function notCheckedAlly() {
        document.querySelector('#ok-ally').innerHTML = "Checking...";
        sendAlly();
    }

    function sendDeckAuto() {
        addSavedDeck();
        sendDeck();
    }

    function addSavedDeck() {
        document.getElementById("chat-log").value = "";
        const name = document.getElementById("name-deck").value;
        document.getElementById("chat-log").value += name;
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n"
        const warlord_name = document.getElementById("warlord-card").children[0].id;
        document.getElementById("chat-log").value += warlord_name.split('_').join(' ');
        document.getElementById("chat-log").value += "\n{AUTOMAIN}";
        var e = document.getElementById("ally");
        if (e.selectedIndex != -1) {
            var text = e.options[e.selectedIndex].text;
            if (text !== "") {
                document.getElementById("chat-log").value += " (" + text + ")";
            }
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n"
        document.getElementById("chat-log").value += "Signature Squad\n\n";
        var elements = document.getElementById("signature-squad-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Army\n\n";
        var elements = document.getElementById("army-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Support\n\n";
        var elements = document.getElementById("support-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Synapse\n\n";
        const synapse_name = document.getElementById("synapse-card").children[0].id;
        if (synapse_name != "Cardback") {
            document.getElementById("chat-log").value += "1x " + synapse_name.split('_').join(' ');
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Attachment\n\n";
        var elements = document.getElementById("attachment-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Event\n\n";
        var elements = document.getElementById("event-cards").children;
        var text = "";
        for (i = 0; i < elements.length; i++) {
            var collection = elements[i].children;
            var count = "";
            var card_name = "";
            for (j = 0; j < collection.length; j++) {
                var id = collection[j].id;
                var trail = "";
                if (id.length > 5) {
                    trail = id.slice(-6);
                    console.log(trail);
                }
                if (trail === "-Count") {
                    count = collection[j].innerHTML;
                    count = count.split('').reverse().join('');
                } else if (trail === "crease") {

                } else {
                    card_name = collection[j].id;
                }
                //console.log(count);
                //console.log(card_name);
                //console.log(collection[j].id);
            }

            card_name = count + "x " + card_name.split('_').join(' ');
            document.getElementById("chat-log").value += card_name + "\n";
        }
        document.getElementById("chat-log").value += "\n----------------------------------------------------------------------\n";
        document.getElementById("chat-log").value += "Planet\n\n";
    }

    function sendDeck() {
        var chat_holder = document.querySelector('#chat-log').value;
        const name = document.getElementById("name-deck").value;
        if (name === "") {
            $('#responseMessage').text("Please give your deck a name");
        } else {
            $.ajax({
                url: '/decks/ajax/',  // The URL of the Django view that handles the request
                type: 'POST',
                data: {
                    'warlord_name': name_warlord,
                    'ally_faction': $('#ally').val(),
                    'username': $('#username').val(),
                    'deck_text': chat_holder,
                    'description': $('#descriptionInput').val(),
                    'flag': 'SENDDECK',
                    'force_send': force_send,
                    'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
                },
                success: function(response) {
                    $('#responseMessage').text(response.message);  // Update the page dynamically
                    const message = response.message;
                    force_send = "F";
                    if (message === "deck with that name already exists") {
                        force_send = "T";
                    } else if (message === "deck ok") {
                        location.href = "/decks/my_decks/";
                    }
                }
            });
        }
    }

    function incrementString(str) {
        var count = str.match(/\d*$/);
        return str.substr(0, count.index) + (++count[0]);
    };

    function decrementString(str) {
        var count = str.match(/\d*$/);
        return str.substr(0, count.index) + (--count[0]);
    };

    function addSigSquad(signature_squad) {
        for (var i = 0; i < signature_squad.length; i++){
            var sig_copies = signature_squad[i][0];
            var sig_card_name = signature_squad[i].slice(3);
            var cardName = sig_card_name;
            var idName = sig_card_name.split(' ').join('_');
            var countName = idName + "-Count";
            var holderName = idName + "-Holder";
            for (var j = 0; j < sig_copies; j++){
                var e = document.getElementById(countName);
                if (typeof(e) != 'undefined' && e != null) {
                    var str = e.innerHTML;
                    str = incrementString(str);
                    e.innerHTML = str;
                } else {
                    var newPart = `<div class="card-name-and-count" id=`;
                    newPart += holderName;
                    newPart += `><div id=`;
                    newPart += idName + "-Count";
                    newPart += ` class="no-break">1`;
                    newPart += `</div><div class="no-break">x </div><div id=`;
                    newPart += idName;
                    newPart += ` class="no-break">`;
                    newPart += cardName;
                    newPart += `</div></div>`
                    document.getElementById("signature-squad-cards").innerHTML += newPart;
                }
            }
        }
    }

    function addCard(card_type, cardName) {
        var idName = cardName.split(' ').join('_');
        var countName = idName + "-Count";
        var holderName = idName + "-Holder";
        var e = document.getElementById(countName);
        if (typeof(e) != 'undefined' && e != null) {
            var str = e.innerHTML;
            if (str !== "3") {
                str = incrementString(str);
                e.innerHTML = str;
            }
        } else {
            var newPart = `<div class="card-name-and-count" id=`;
            newPart += holderName;
            newPart += `>`;
            newPart += `<input id=`;
            newPart += idName + "-Increase";
            newPart += ` type="button" value="+" onclick="incrementCount(this.id);">`
            newPart += `<div id=`;
            newPart += idName + "-Count";
            newPart += ` class="no-break">1</div>`;
            newPart += `<input id=`;
            newPart += idName + "-Decrease";
            newPart += ` type="button" value="-" onclick="decreaseCount(this.id);">`
            newPart += `<div id=`;
            newPart += idName;
            newPart += ` class="no-break">`;
            newPart += cardName;
            newPart += `</div>`;
            newPart += `</div>`
            document.getElementById(card_type.toLowerCase() + "-cards").innerHTML += newPart;
        }
    }

    document.querySelector('#card-submit').onclick = function(e) {
        const messageInputDom = document.querySelector('#card-input');
        const message = messageInputDom.value;
        $.ajax({
            url: '/decks/ajax/',  // The URL of the Django view that handles the request
            type: 'POST',
            data: {
                'warlord_name': name_warlord,
                'ally_faction': $('#ally').val(),
                'card_name': message,
                'flag': 'ADDCARD',
                'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
            },
            success: function(response) {
                $('#responseMessage').text(response.message);  // Update the page dynamically
                const message = response.message;
                if (message === "Warlord") {
                    document.getElementById("signature-squad-cards").innerHTML = `Signature Squad`;
                    document.getElementById("army-cards").innerHTML = `Army Units`;
                    document.getElementById("event-cards").innerHTML = `Events`;
                    document.getElementById("attachment-cards").innerHTML = `Attachments`;
                    document.getElementById("support-cards").innerHTML = `Supports`;
                    name_warlord = response.warlord;
                    route = "/static/images/CardImages/" + name_warlord.split(' ').join('_') + ".jpg";
                    notCheckedAlly();
                    document.getElementById('warlord-card').innerHTML = `<img id=` + name_warlord.split(' ').join('_') + ` src=` + route + ` class="db-image">`
                    document.getElementById('synapse-card').innerHTML = `<img id="Cardback" src="/static/images/CardImages/Cardback.jpg" class="db-image">`
                    signature_squad = response.sig_squad;
                    addSigSquad(signature_squad);
                } else if (message === "ADDCARD") {
                    var card_type = response.card_type;
                    var cardName = response.card_name;
                    if (card_type === "Synapse") {
                        var synapseName = cardName.split(' ').join('_');
                        route = "/static/images/CardImages/" + synapseName + ".jpg";
                        document.getElementById('synapse-card').innerHTML = `<img id=` + synapseName + ` src=` + route + ` class="db-image">`
                    } else {
                        addCard(card_type, cardName);
                    }
                }
            }
        });
        messageInputDom.value = '';
    };

    // Ajax search cards function
    $(document).ready(function() {
        $('#myForm').on('submit', function(event) {
            event.preventDefault();

            $.ajax({
                url: '/cards/ajax/',  // The URL of the Django view that handles the request
                type: 'POST',
                data: {
                    'search': $('#searchInput').val(),
                    'faction': $('#faction').val(),
                    'card_type': $('#cardType').val(),
                    'loyalty': $('#loyalty').val(),
                    'traits': "",
                    'shields': "-1",
                    'min-cost': "-1",
                    'max-cost': "-1",
                    'min-command': "-1",
                    'max-command': "-1",
                    'min-attack': "-1",
                    'max-attack': "-1",
                    'min-health': "-1",
                    'max-health': "-1",
                    'redirect-enabled': "No",
                    'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
                },
                success: function(response) {
                    // $('#responseMessage').text(response.message);
                    const message = response.message;
                    console.log("test")

                    current_page_number = 0;
                    var cardCount = 0;
                    var pageCount = 0;
                    var card_names = response.cards;
                    var card_types = response.card_types;
                    var loyalties = response.loyalties;
                    var factions = response.factions;
                    const image_names = response.image_names;
                    e = document.getElementById("card-filter-results");
                    e.innerHTML = ``;
                    var img_src = "";
                    var img_link = "";
                    var new_string = "";
                    var new_id = "";
                    stored_image_links = [[]];
                    stored_image_names = [[]];
                    stored_card_names = [[]];
                    stored_card_types = [[]];
                    stored_card_loyalties = [[]];
                    stored_card_factions = [[]];
                    for (let i = 0; i < image_names.length; i++) {
                        if (cardCount === 20) {
                            pageCount += 1;
                            cardCount = 0;
                            stored_image_links.push([]);
                            stored_image_names.push([]);
                            stored_card_names.push([]);
                            stored_card_types.push([]);
                            stored_card_loyalties.push([]);
                            stored_card_factions.push([]);
                        }
                        img_link = "/cards/" + image_names[i] + "/";
                        stored_image_links[pageCount].push(img_link);
                        img_src ="/static/images/CardImages/" + image_names[i] + ".jpg";
                        stored_image_names[pageCount].push(img_src);
                        stored_card_names[pageCount].push(card_names[i]);
                        stored_card_types[pageCount].push(card_types[i]);
                        stored_card_loyalties[pageCount].push(loyalties[i]);
                        stored_card_factions[pageCount].push(factions[i]);
                        if (pageCount === 0) {
                            new_string += `<div class="searched-card" onclick="quickAddCard(this)" onmouseenter="showImg(this)" onmouseleave="clearImg()" data-src=` + img_src + ` data-name=` + card_names[i].split(' ').join('_') + `>`
                            new_string += `<div class="mini-card-name">` + card_names[i] + `</div>`
                            new_string += `<div class="mini-card-type">` + card_types[i] + `</div>`
                            new_string += `<div class="mini-card-loyalty">` + loyalties[i] + `</div>`
                            new_string += `<div class="mini-card-faction">` + factions[i] + `</div>`
                            new_string += `</div>`
                        }
                        cardCount += 1;
                    }
                    max_page_number = pageCount;
                    console.log(stored_card_names);
                    e.innerHTML += new_string;
                }
            });
        });
    });


    // Ajax setup for form submission
    function sendAlly() {
        $.ajax({
            url: '/decks/ajax/',  // The URL of the Django view that handles the request
            type: 'POST',
            data: {
                'warlord_name': name_warlord,
                'ally_faction': $('#ally').val(),
                'flag': 'SETALLY',
                'csrfmiddlewaretoken': '{{ csrf_token }}' // CSRF token for security
            },
            success: function(response) {
                $('#responseMessage').text(response.message);  // Update the page dynamically
                const message = response.message;
                const ally_result = response.ally_result;
                if (ally_result === "OK") {
                    document.querySelector('#ok-ally').innerHTML = "Ally OK";
                } else {
                    document.querySelector('#ok-ally').innerHTML = "Invalid Ally";
                }
            }
        });
    }
</script>
{% endblock %}
